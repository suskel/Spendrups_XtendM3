{"programModules":{"CREXTPRT":{"program":"CREXTPRT","triggers":{"MWS640Extension":{"name":"MWS640Extension","method":"extendOutput","advice":"POST","active":true,"modified":1751277769235,"modifiedBy":"EXT_SK","sourceUuid":"ba9fbfbb-dea3-462f-96f5-54f72bf75ebd","programName":"CREXTPRT","utilities":[],"type":"METHOD","priority":500,"market":"ALL"}},"transactions":{},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"ba9fbfbb-dea3-462f-96f5-54f72bf75ebd":{"uuid":"ba9fbfbb-dea3-462f-96f5-54f72bf75ebd","updated":1751277753333,"updatedBy":"EXT_SK","created":1751277517903,"createdBy":"EXT_SK","apiVersion":"0.21","beVersion":"16.0.0.20250414161800.6","language":"GROOVY","codeHash":"DA6ED92510CB72A57E82FCD6A408467B2C6A041556EC23E80A16EA37C9BD1FE4","code":"LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCiBFeHRlbnNpb24gTmFtZTogQ1JFWFRQUlQvTVdTNjQwRXh0ZW5zaW9uDQogVHlwZTogRXh0ZW5kTTNUcmFuc2FjdGlvbg0KIFNjcmlwdCBBdXRob3I6IFN1c2FubmEgS2VsbGFuZGVyIC0gRWx2ZW5pdGUNCiBEYXRlOiAyMDI1LTAxLTMwDQogRGVzY3JpcHRpb246IEV4dGVuc2lvbiBpbiBYTUxPVVQsIHNldmVyYWwgZG9jdW1lbnQNCiANCg0KIFJldmlzaW9uIEhpc3Rvcnk6DQogTmFtZSAgICAgICAgICAgICAgICAgICAgRGF0ZSAgICAgICAgICAgICBWZXJzaW9uICAgICAgICAgIERlc2NyaXB0aW9uIG9mIENoYW5nZXMNCiBTdXNhbm5hIEtlbGxhbmRlciAgICAgICAyMDI1LTAxLTMwICAgICAgIDEuMCAgICAgICAgICAgICAgU1AwMDI5IC0gQWRkZWQgaW5mb3JtYXRpb24gaW4gTVdTNjQwUEYgIA0KKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLw0KaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lDQppbXBvcnQgamF2YS50aW1lLmZvcm1hdC5EYXRlVGltZUZvcm1hdHRlcg0KcHVibGljIGNsYXNzIE1XUzY0MEV4dGVuc2lvbiBleHRlbmRzIEV4dGVuZE0zVHJpZ2dlciB7DQogIHByaXZhdGUgZmluYWwgTWV0aG9kQVBJIG1ldGhvZA0KICBwcml2YXRlIGZpbmFsIERhdGFiYXNlQVBJIGRhdGFiYXNlDQogIHByaXZhdGUgZmluYWwgUHJvZ3JhbUFQSSBwcm9ncmFtIA0KICBwcml2YXRlIGZpbmFsIExvZ2dlckFQSSBsb2dnZXIgIA0KICBwcml2YXRlIGZpbmFsIFNlc3Npb25BUEkgc2Vzc2lvbiANCiAgDQogIC8vIENvbW1vbg0KICBpbnQgY29tcGFueQ0KICBTdHJpbmcgcHJpbnRlckZpbGU7ICAgDQogIFN0cmluZyBqb2JOdW1iZXI7ICAgICAgIA0KICBTdHJpbmcgc3RydWN0dXJlOyAgIA0KICBpbnQgdmFyaWFudDsgICAgICAgDQogIGludCBycGJrOyAgICAgICAgICAgIA0KICBIYXNoTWFwPFN0cmluZywgT2JqZWN0PiBmaWVsZE1hcDsNCiAgDQogIC8vIE1XUzY0MFBGIA0KICBTdHJpbmcgd2FyZWhvdXNlID0gIiINCiAgU3RyaW5nIGl0ZW1OdW1iZXIgPSAiIiAgICAgICAgDQogIGludCBzaGlwbWVudCA9IDANCiAgbG9uZyBkZWxpdmVyeSA9IDAgDQogIFN0cmluZyBwYWNrYWdpbmcgPSAiIg0KICBkb3VibGUgZGVsaXZlcnlRdHkgPSAwICANCiAgU3RyaW5nW10gYXJyYXlJdGVtID0gbmV3IFN0cmluZ1s5OTk5XQ0KICBpbnRbXSBhcnJheU5ick9mSXRlbSA9IG5ldyBpbnRbOTk5OV0NCiAgaW50IG51bWJlck9mQ1VHRVgxID0gMA0KICBpbnQgY291bnRlciA9IDANCiAgaW50IGFycmF5SW5kZXggPSAwDQogIGludCBzZXF1ZW5jZSA9IDEgICAgICAgICAgLy8gZml4IHZhbHVlIHRvIGJlIGFibGUgdG8gImxpc3QgYWxsIiBpbiBhIGN1c3RvbSBzZWN0aW9uIA0KICBTdHJpbmdbXSBhcnJheUl0ZW1XaXRoVU4gPSBuZXcgU3RyaW5nWzk5OTldDQogIGludFtdIGFycmF5VU5OdW1iZXIgPSBuZXcgaW50Wzk5OTldDQogIGRvdWJsZVtdIGFycmF5R3Jvc3NXZWlnaHQgPSBuZXcgZG91YmxlWzk5OTldDQogIGRvdWJsZVtdIGFycmF5RGVsaXZlcnlRdHkgPSBuZXcgZG91YmxlWzk5OTldDQogIGludCBjb3VudGVyVU4gPSAwIA0KICBTdHJpbmdbXSBhcnJheUl0ZW1UeXBlRXhjbHVkZWQgPSBuZXcgU3RyaW5nWzUwXQ0KICBpbnQgY291bnRlckV4YyA9IDAgDQogIGRvdWJsZSBhY2NOb3RJbmNsdWRlZCA9IDAgIA0KIA0KICANCiAgaW50IGVudHJ5RGF0ZSA9IDANCiAgaW50IGVudHJ5VGltZSA9IDAgDQoNCiAgcHVibGljIE1XUzY0MEV4dGVuc2lvbihNZXRob2RBUEkgbWV0aG9kLCBEYXRhYmFzZUFQSSBkYXRhYmFzZSwgUHJvZ3JhbUFQSSBwcm9ncmFtLCBMb2dnZXJBUEkgbG9nZ2VyLCBTZXNzaW9uQVBJIHNlc3Npb24pIHsNCiAgICB0aGlzLm1ldGhvZCA9IG1ldGhvZCANCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2UNCiAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtIA0KICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyICANCiAgICB0aGlzLnNlc3Npb24gPSBzZXNzaW9uDQogIH0NCg0KICBwdWJsaWMgdm9pZCBtYWluKCkgew0KICAgIC8vIEdldCBpbmZvcm1hdGlvbiBmcm9tIFhNTE9VVA0KICAgIHByaW50ZXJGaWxlID0gbWV0aG9kLmdldEFyZ3VtZW50KDApIGFzIFN0cmluZw0KICAgIGpvYk51bWJlciA9IG1ldGhvZC5nZXRBcmd1bWVudCgxKSBhcyBTdHJpbmcNCiAgICBzdHJ1Y3R1cmUgPSBtZXRob2QuZ2V0QXJndW1lbnQoMikgYXMgU3RyaW5nDQogICAgdmFyaWFudCA9IG1ldGhvZC5nZXRBcmd1bWVudCgzKSBhcyBpbnQNCiAgICBycGJrPSBtZXRob2QuZ2V0QXJndW1lbnQoNCkgYXMgaW50IA0KICAgIEhhc2hNYXA8U3RyaW5nLCBPYmplY3Q+IGZpZWxkTWFwID0gbWV0aG9kLmdldEFyZ3VtZW50KDUpIGFzIEhhc2hNYXANCiAgICAgDQogICAgDQogICAgbG9nZ2VyLmRlYnVnKCJMT0dHQSBwcmludGVyRmlsZSAiICsgcHJpbnRlckZpbGUgKyAiIHN0cnVjdHVyZSAiICsgc3RydWN0dXJlICsgIiAgcnBiayAiICsgcnBiayApDQogICAgDQogICAgaWYocHJpbnRlckZpbGUuZXF1YWxzKCJNV1M2NDBQRiIpICYmIHN0cnVjdHVyZS5lcXVhbHMoIkNVU19TUF8wMS0wMSIpICYmIHJwYmsgPT0gNil7IA0KICAgICAgY3JlYXRlVG9NV1M2NDAoZmllbGRNYXApDQogICAgfQ0KICAgDQogIH0NCiAgDQogICAgDQogIC8qDQogICAgIGNyZWF0ZSBmb3IgcHJpbnRvdXQgZm9yIE1XUzY0MFBGDQogICovDQogIHB1YmxpYyB2b2lkIGNyZWF0ZVRvTVdTNjQwKEhhc2hNYXA8U3RyaW5nLCBPYmplY3Q+IGZpZWxkTWFwKXsNCiAgICByZXRyaWV2ZUlucHV0UGFyYW1ldGVycygpDQogICAgc2hpcG1lbnQgPSBmaWVsZE1hcC5nZXQoIkRBQ09OTiIpIGFzIGludA0KICAgIGRlbGV0ZVJlY29yZEZvclNoaXBtZW50KCkNCiAgICBnZXRVTkZyb21NSVRNQVMoKQ0KICAgIGdldENVR0VYMVNlY29uZCgiTUlUVFRZIikgDQogICAgbG9vcE1IRElTSChzaGlwbWVudCkgIA0KICAgIGNyZWF0ZUVYVDY0MCgpDQogICAgY3JlYXRlRVhUNjRMKCkNCiAgICBjcmVhdGVFWFQ2NEQoKQ0KICB9IA0KICANCiAgDQogIA0KICAvKg0KICAgICBEZWxldGUgcmVjb3JkIGluIEVYVDY0MCAgIC8vIE1XUzY0MFBGDQoJKi8NCiAgcHVibGljIHZvaWQgZGVsZXRlUmVjb3JkRm9yU2hpcG1lbnQoKXsgICANCiAgICANCiAgICBkZWxldGVSZWNvcmRJbkVYVDY0MCgpDQogICAgZGVsZXRlUmVjb3JkSW5FWFQ2NEwoKQ0KICAgIGRlbGV0ZVJlY29yZEluRVhUNjREKCkNCiAgfSANCiAgIA0KICANCiAgLyoNCiAgICAgRGVsZXRlIHJlY29yZCBpbiBFWFQ2NDAgICAgICAgICAgICAvLyBNV1M2NDBQRg0KCSovDQogIHB1YmxpYyB2b2lkIGRlbGV0ZVJlY29yZEluRVhUNjQwKCl7ICAgDQogICAgICBEQkFjdGlvbiBkYmFFWFQ2NDAgPSBkYXRhYmFzZS50YWJsZSgiRVhUNjQwIikuaW5kZXgoIjAwIikuYnVpbGQoKSAgDQogICAgICBEQkNvbnRhaW5lciBjb25FWFQ2NDAgPSBkYmFFWFQ2NDAuZ2V0Q29udGFpbmVyKCkNCiAgICAgIGNvbkVYVDY0MC5zZXQoIkVYQ09OTyIsIGNvbXBhbnkpDQogICAgICBjb25FWFQ2NDAuc2V0KCJFWENPTk4iLCBzaGlwbWVudCkgDQogICAgICBkYmFFWFQ2NDAucmVhZEFsbExvY2soY29uRVhUNjQwLCAyLCBkZWxldGVyQ2FsbGJhY2s2NDApIA0KICB9DQoNCg0KICBDbG9zdXJlPD8+IGRlbGV0ZXJDYWxsYmFjazY0MCA9IHsgTG9ja2VkUmVzdWx0IGxvY2tlZFJlc3VsdCAtPiANCiAgICBsb2NrZWRSZXN1bHQuZGVsZXRlKCkNCiAgfQ0KICAgDQogIC8qDQogICAgIERlbGV0ZSByZWNvcmQgaW4gIEVYVDY0MEwgICAgICAvLyBNV1M2NDBQRg0KCSovDQogIHB1YmxpYyB2b2lkIGRlbGV0ZVJlY29yZEluRVhUNjRMKCl7ICAgDQogICAgICBEQkFjdGlvbiBkYmFFWFQ2NEwgPSBkYXRhYmFzZS50YWJsZSgiRVhUNjRMIikuaW5kZXgoIjAwIikuYnVpbGQoKSAgDQogICAgICBEQkNvbnRhaW5lciBjb25FWFQ2NEwgPSBkYmFFWFQ2NEwuZ2V0Q29udGFpbmVyKCkNCiAgICAgIGNvbkVYVDY0TC5zZXQoIkVYQ09OTyIsIGNvbXBhbnkpDQogICAgICBjb25FWFQ2NEwuc2V0KCJFWENPTk4iLCBzaGlwbWVudCkgDQogICAgICBkYmFFWFQ2NEwucmVhZEFsbExvY2soY29uRVhUNjRMLCAyLCBkZWxldGVyQ2FsbGJhY2s2NEwpIA0KICB9DQoNCg0KICBDbG9zdXJlPD8+IGRlbGV0ZXJDYWxsYmFjazY0TCA9IHsgTG9ja2VkUmVzdWx0IGxvY2tlZFJlc3VsdCAtPiANCiAgICBsb2NrZWRSZXN1bHQuZGVsZXRlKCkNCiAgfQ0KICANCiAgLyoNCiAgICAgRGVsZXRlIHJlY29yZCBpbiAgRVhUNjQwRCAgICAgIC8vIE1XUzY0MFBGDQoJKi8NCiAgcHVibGljIHZvaWQgZGVsZXRlUmVjb3JkSW5FWFQ2NEQoKXsgICANCiAgICAgIERCQWN0aW9uIGRiYUVYVDY0RCA9IGRhdGFiYXNlLnRhYmxlKCJFWFQ2NEQiKS5pbmRleCgiMDAiKS5idWlsZCgpICANCiAgICAgIERCQ29udGFpbmVyIGNvbkVYVDY0RCA9IGRiYUVYVDY0RC5nZXRDb250YWluZXIoKQ0KICAgICAgY29uRVhUNjRELnNldCgiRVhDT05PIiwgY29tcGFueSkgIA0KICAgICAgY29uRVhUNjRELnNldCgiRVhDT05OIiwgc2hpcG1lbnQpIA0KICAgICAgZGJhRVhUNjRELnJlYWRBbGxMb2NrKGNvbkVYVDY0RCwgMiwgZGVsZXRlckNhbGxiYWNrNjREKSANCiAgfQ0KDQoNCiAgQ2xvc3VyZTw/PiBkZWxldGVyQ2FsbGJhY2s2NEQgPSB7IExvY2tlZFJlc3VsdCBsb2NrZWRSZXN1bHQgLT4gDQogICAgbG9ja2VkUmVzdWx0LmRlbGV0ZSgpDQogIH0NCiAgDQogICAgIA0KICAvKg0KICAgICBMaXN0IE1IRElTSCAgICAvLyBNV1M2NDBQRg0KICAqLw0KICBwdWJsaWMgdm9pZCBsb29wTUhESVNIKGludCBpbkNPTk4pew0KICAgICAgICAgDQogICAgREJBY3Rpb24gZGJhTUhESVNIID0gZGF0YWJhc2UudGFibGUoIk1IRElTSCIpLnNlbGVjdGlvbigiT1FETElYIiwgIk9RV0hMTyIpLmluZGV4KCIyMCIpLmJ1aWxkKCkgICANCiAgICBEQkNvbnRhaW5lciBjb25NSERJU0ggPSBkYmFNSERJU0guZ2V0Q29udGFpbmVyKCkNCiAgICBjb25NSERJU0guc2V0KCJPUUNPTk8iLCBjb21wYW55KSAgIA0KICAgIGNvbk1IRElTSC5zZXQoIk9RSU5PVSIsIDEpICAgDQogICAgY29uTUhESVNILnNldCgiT1FDT05OIiwgaW5DT05OKSAgIA0KICAgIGRiYU1IRElTSC5yZWFkQWxsKGNvbk1IRElTSCwgMywgMTAwMDAsIHJlc3VsdEhhbmRsZXJGb3JNSERJU0gpICANCiAgfSAgIA0KICAgIA0KICBDbG9zdXJlPD8+IHJlc3VsdEhhbmRsZXJGb3JNSERJU0ggPSB7IERCQ29udGFpbmVyIGNvbk1IRElTSCAtPiAgIA0KICAgICBkZWxpdmVyeSA9IGNvbk1IRElTSC5nZXRMb25nKCJPUURMSVgiKSAgIA0KICAgICB3YXJlaG91c2UgPSBjb25NSERJU0guZ2V0U3RyaW5nKCJPUVdITE8iKSAgDQogICAgIGxvb3BNUFRSTlMod2FyZWhvdXNlLCBkZWxpdmVyeSkgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZnJvbSBNSERJU0gsIEVYNjQwIGFuZCBFWFQ2NEwgDQogICAgIGxvb3BNRlRSTlMod2FyZWhvdXNlLCBkZWxpdmVyeSkgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZnJvbSBNSERJU0gsIEVYVDY0RA0KICAgDQogICAgIA0KICB9DQogIA0KICAgIA0KCS8qDQogICAgR2V0IHZhbHVlIGZyb20gTVBUUk5TICAgICAgICAgICAgIC8vIE1XUzY0MFBGDQogICovDQogIHB1YmxpYyB2b2lkIGxvb3BNUFRSTlMoU3RyaW5nIGluV0hMTywgbG9uZyBpbkRMSVgpIHsgIA0KICAgICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiTVBUUk5TIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJPUlBBQ1QiLCAiT1JETFFUIikuYnVpbGQoKQ0KICAgICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkNCiAgICAgIGNvbnRhaW5lci5zZXQoIk9SQ09OTyIsIGNvbXBhbnkpDQogICAgICBjb250YWluZXIuc2V0KCJPUkRJUEEiLCAwKSANCiAgICAgIGNvbnRhaW5lci5zZXQoIk9SV0hMTyIsIGluV0hMTykgDQogICAgICBjb250YWluZXIuc2V0KCJPUkRMSVgiLCBpbkRMSVgpIA0KICAgICAgcXVlcnkucmVhZEFsbChjb250YWluZXIsIDQsIDEwMDAsIHJlbGVhc2VkSXRlbVByb2Nlc3Nvck1QVFJOUykgICAgIA0KICB9DQogIA0KICBDbG9zdXJlPD8+IHJlbGVhc2VkSXRlbVByb2Nlc3Nvck1QVFJOUyA9IHsgREJDb250YWluZXIgY29udGFpbmVyICAtPiAgIA0KICAgICAgcGFja2FnaW5nID0gY29udGFpbmVyLmdldFN0cmluZygiT1JQQUNUIikgIA0KICAgICAgZGVsaXZlcnlRdHkgPSBkZWxpdmVyeVF0eSArIChkb3VibGUpY29udGFpbmVyLmdldERvdWJsZSgiT1JETFFUIikgIA0KICAgICAgDQogICAgICBnZXRNSVRQQUMocGFja2FnaW5nKSAgICAgICAgICAgICAvLyBmcm9tIE1QVFJOUw0KICAgICAgZ2V0Q1VHRVgxKCJNSVRQQUMiLCBwYWNrYWdpbmcpDQogIH0gIA0KICANCiAgICANCgkvKg0KICAgIEdldCB2YWx1ZSBmcm9tIE1GVFJOUyAgICAgICAgICAgICAvLyBNV1M2NDBQRg0KICAqLw0KICBwdWJsaWMgdm9pZCBsb29wTUZUUk5TKFN0cmluZyBpbldITE8sIGxvbmcgaW5ETElYKSB7ICANCiAgICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk1GVFJOUyIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiT1NHUldFIiwgIk9TRExRVCIsICJPU0lUTk8iKS5idWlsZCgpDQogICAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQ0KICAgICAgY29udGFpbmVyLnNldCgiT1NDT05PIiwgY29tcGFueSkgDQogICAgICBjb250YWluZXIuc2V0KCJPU1dITE8iLCBpbldITE8pIA0KICAgICAgY29udGFpbmVyLnNldCgiT1NETElYIiwgaW5ETElYKSANCiAgICAgIHF1ZXJ5LnJlYWRBbGwoY29udGFpbmVyLCAzLCAxMDAwMCwgcmVsZWFzZWRJdGVtUHJvY2Vzc29yTUZUUk5TKSAgICAgDQogIH0NCiAgDQogIENsb3N1cmU8Pz4gcmVsZWFzZWRJdGVtUHJvY2Vzc29yTUZUUk5TID0geyBEQkNvbnRhaW5lciBjb250YWluZXIgIC0+ICANCiAgICAgaWYoYXJyYXlJdGVtV2l0aFVOLmNvbnRhaW5zKGNvbnRhaW5lci5nZXRTdHJpbmcoIk9TSVROTyIpLnRvU3RyaW5nKCkpKXsgICAgICAgICAgDQogICAgICAgYXJyYXlJbmRleCA9IGFycmF5SXRlbVdpdGhVTi5maW5kSW5kZXhPZntpdCA9PSBjb250YWluZXIuZ2V0U3RyaW5nKCJPU0lUTk8iKS50b1N0cmluZygpfQ0KICAgICAgIGlmKGFycmF5SW5kZXggPj0gMCl7DQogICAgICAgICBhcnJheUdyb3NzV2VpZ2h0W2FycmF5SW5kZXhdKz0gKGRvdWJsZSljb250YWluZXIuZ2V0RG91YmxlKCJPU0dSV0UiKSAgICAgICAgICAgIC8vIGFjY3VtdWxhdGUgR1JXRSBmb3IgbGF0ZXIgY2FsY3VsYXRpb24NCiAgICAgICAgIGFycmF5RGVsaXZlcnlRdHlbYXJyYXlJbmRleF0rPSAoZG91YmxlKWNvbnRhaW5lci5nZXREb3VibGUoIk9TRExRVCIpICAgICAgICAgICAgLy8gYWNjdW11bGF0ZSBETFFUIGZvciBsYXRlciBjYWxjdWxhdGlvbiANCiAgICAgIH0NCiAgICB9IA0KICAgIGlmKGFycmF5SXRlbVR5cGVFeGNsdWRlZC5jb250YWlucyhnZXRNSVRNQVMoY29udGFpbmVyLmdldFN0cmluZygiT1NJVE5PIikudG9TdHJpbmcoKSkpKXsgDQogICAgICBhY2NOb3RJbmNsdWRlZCArPSAoZG91YmxlKWNvbnRhaW5lci5nZXREb3VibGUoIk9TRExRVCIpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV4Y2x1ZGUgRExRVCBmb3IgSXRlbSB3aXRoIEl0ZW1UeXBlIG1hcmtlZCBpbiBDUlMwNDAvQ1VHRVgxDQogICAgfSANCiAgfSAgDQogIA0KICANCiAgLyoNCiAgICBHZXQgdmFsdWUgZnJvbSBNSVRQQUMgICAgICAgICAgLy8gTVdTNjQwUEYNCiAgKi8NCiAgcHVibGljIHZvaWQgZ2V0TUlUUEFDKFN0cmluZyBpblBBQ1QpIHsgIA0KICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk1JVFBBQyIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiTTRJVE5PIikuYnVpbGQoKQ0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpDQogICAgY29udGFpbmVyLnNldCgiTTRDT05PIiwgY29tcGFueSkNCiAgICBjb250YWluZXIuc2V0KCJNNFBBQ1QiLCBpblBBQ1QpIA0KICAgIGJvb2xlYW4gZm91bmQgPSBxdWVyeS5yZWFkKGNvbnRhaW5lcikNCiAgICANCiAgICBpZiAoIWZvdW5kKSB7DQogICAgICByZXR1cm4gIA0KICAgIH0gDQogICAgaWYoIWFycmF5SXRlbS5jb250YWlucyhjb250YWluZXIuZ2V0U3RyaW5nKCJNNElUTk8iKS50b1N0cmluZygpKSl7IA0KICAgICAgYXJyYXlJdGVtW2NvdW50ZXJdID0gY29udGFpbmVyLmdldFN0cmluZygiTTRJVE5PIikudG9TdHJpbmcoKSAgICAgICAgICAgLy8gc2F2ZSBpdGVtIGFuZCBudW1iZXIgb2YgcmVjb3Jkcw0KICAgICAgYXJyYXlOYnJPZkl0ZW1bY291bnRlcl0gPSAxDQogICAgICBjb3VudGVyKysNCiAgICB9ZWxzZXsgDQogICAgICBhcnJheUluZGV4ID0gYXJyYXlJdGVtLmZpbmRJbmRleE9me2l0ID09IGNvbnRhaW5lci5nZXRTdHJpbmcoIk00SVROTyIpLnRvU3RyaW5nKCl9DQogICAgICBpZihhcnJheUluZGV4ID49IDApew0KICAgICAgICAgYXJyYXlOYnJPZkl0ZW1bYXJyYXlJbmRleF0rKw0KICAgICAgfQ0KICAgIH0NCiAgICANCiAgICByZXR1cm4gDQogIH0gDQogIA0KICAgDQoJLyoNCiAgICBHZXQgdmFsdWUgZnJvbSBDVUdFWDEgYW5kIE9PREZMVCAgICAgICAvLyBNV1M2NDBQRg0KICAqLw0KICBwdWJsaWMgdm9pZCBnZXRDVUdFWDEoU3RyaW5nIGluRklMRSwgU3RyaW5nIGluUEswMSkgeyAgDQogICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiQ1VHRVgxIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJGMUNIQjEiKS5idWlsZCgpDQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkNCiAgICBjb250YWluZXIuc2V0KCJGMUNPTk8iLCBjb21wYW55KQ0KICAgIGNvbnRhaW5lci5zZXQoIkYxRklMRSIsIGluRklMRSkgDQogICAgY29udGFpbmVyLnNldCgiRjFQSzAxIiwgaW5QSzAxKSANCiAgICBxdWVyeS5yZWFkQWxsKGNvbnRhaW5lciwgMywgMSwgcmVsZWFzZWRJdGVtUHJvY2Vzc29yQ1VHRVgxKSAgICANCiAgICANCiAgfQ0KICANCiAgQ2xvc3VyZTw/PiByZWxlYXNlZEl0ZW1Qcm9jZXNzb3JDVUdFWDEgPSB7IERCQ29udGFpbmVyIGNvbnRhaW5lciAgLT4gICANCiAgICBpZigoaW50KWNvbnRhaW5lci5nZXRJbnQoIkYxQ0hCMSIpID09IDEpeyANCiAgICAgIG51bWJlck9mQ1VHRVgxKysNCiAgICAgIA0KICAgIH0NCiAgfSANCiAgICANCgkvKg0KICAgIEdldCB2YWx1ZSBmcm9tIENVR0VYMSBhbmQgTUlUVFRZICAgICAgIC8vIE1XUzY0MFBGDQogICovDQogIHB1YmxpYyB2b2lkIGdldENVR0VYMVNlY29uZChTdHJpbmcgaW5GSUxFKSB7ICANCiAgICBFeHByZXNzaW9uRmFjdG9yeSBleHAgPSBkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiQ1VHRVgxIikgDQogICAgZXhwID0gZXhwLmVxKCJGMUNIQjMiLCAiMSIpICANCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJDVUdFWDEiKS5pbmRleCgiMDAiKS5tYXRjaGluZyhleHApLnNlbGVjdGlvbigiRjFQSzAyIikuYnVpbGQoKQ0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpDQogICAgY29udGFpbmVyLnNldCgiRjFDT05PIiwgY29tcGFueSkNCiAgICBjb250YWluZXIuc2V0KCJGMUZJTEUiLCBpbkZJTEUpICANCiAgICBxdWVyeS5yZWFkQWxsKGNvbnRhaW5lciwgMiwgNTAsIHJlbGVhc2VkSXRlbVByb2Nlc3NvckNVR0VYMVNlY29uZCkgICAgDQogICAgDQogIH0NCiAgDQogIENsb3N1cmU8Pz4gcmVsZWFzZWRJdGVtUHJvY2Vzc29yQ1VHRVgxU2Vjb25kID0geyBEQkNvbnRhaW5lciBjb250YWluZXIgIC0+ICAgDQogICBpZighYXJyYXlJdGVtVHlwZUV4Y2x1ZGVkLmNvbnRhaW5zKGNvbnRhaW5lci5nZXRTdHJpbmcoIkYxUEswMiIpKSkgeyANCiAgICAgYXJyYXlJdGVtVHlwZUV4Y2x1ZGVkW2NvdW50ZXJFeGNdID0gY29udGFpbmVyLmdldFN0cmluZygiRjFQSzAyIikgICAgDQogICAgIGNvdW50ZXJFeGMrKyANCiAgIH0NCiAgfQ0KICANCiAgDQogICANCiAgLyoNCiAgICBHZXQgYWxsIFVOIG51bWJlciBmcm9tIE1JVE1BUywgdG8gYmUgY29tcGFyZWQgbGF0ZXIgICAgICAgICAgLy8gTVdTNjQwUEYNCiAgICBUaGV5IGFyZSBmZXcsIGFuZCB0aGlzIHdheSBiZSBtb3JlIGVmZmljaWFudCANCiAgKi8NCiAgcHVibGljIHZvaWQgZ2V0VU5Gcm9tTUlUTUFTKCkgeyAgDQogICAgRXhwcmVzc2lvbkZhY3RvcnkgZXhwID0gZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIk1JVE1BUyIpIA0KICAgIGV4cCA9IGV4cC5uZSgiTU1VTk5OIiwgIjAiKSANCiAgICBleHAgPSBleHAuYW5kKGV4cC5nZSgiTU1TVEFUIiwgIjIwIikpDQogICAgZXhwID0gZXhwLmFuZChleHAubGUoIk1NU1RBVCIsICI4MCIpKQ0KICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk1JVE1BUyIpLmluZGV4KCIwMCIpLm1hdGNoaW5nKGV4cCkuc2VsZWN0aW9uKCJNTUlUTk8iLCAiTU1VTk5OIikuYnVpbGQoKQ0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpDQogICAgY29udGFpbmVyLnNldCgiTU1DT05PIiwgY29tcGFueSkgDQogICAgcXVlcnkucmVhZEFsbChjb250YWluZXIsIDEsIDEwMDAwLCByZXN1bHRIYW5kbGVyRm9yTUlUTUFTKSAgDQogIH0gICANCiAgICANCiAgQ2xvc3VyZTw/PiByZXN1bHRIYW5kbGVyRm9yTUlUTUFTID0geyBEQkNvbnRhaW5lciBjb250YWluZXIgLT4gICAgIA0KICAgICBhcnJheUl0ZW1XaXRoVU5bY291bnRlclVOXSA9IGNvbnRhaW5lci5nZXRTdHJpbmcoIk1NSVROTyIpDQogICAgIGFycmF5VU5OdW1iZXJbY291bnRlclVOXSA9IGNvbnRhaW5lci5nZXRJbnQoIk1NVU5OTiIpIA0KICAgICBjb3VudGVyVU4rKyANCiAgICANCiAgICAgIA0KICB9DQogICAgDQogIC8qDQogICAgR2V0IGluZm9ybWF0aW9uIGZyb20gTUlUTUFTICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1XUzY0MFBGIA0KICAqLw0KICBTdHJpbmcgZ2V0TUlUTUFTKFN0cmluZyBpbklUTk8pIHsgICANCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJNSVRNQVMiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIk1NSVRUWSIpLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQ0KICAgIGNvbnRhaW5lci5zZXQoIk1NQ09OTyIsIGNvbXBhbnkpIA0KICAgIGNvbnRhaW5lci5zZXQoIk1NSVROTyIsIGluSVROTykgDQogICAgYm9vbGVhbiBmb3VuZCA9IHF1ZXJ5LnJlYWQoY29udGFpbmVyKQ0KICAgIA0KICAgIGlmICghZm91bmQpIHsNCiAgICAgIHJldHVybiAiIiAgDQogICAgfSANCiAgICANCiAgICANCiAgIHJldHVybiBjb250YWluZXIuZ2V0U3RyaW5nKCJNTUlUVFkiKQ0KICAgICAgDQogIH0NCiAgDQogIA0KICANCiAgLyoNCiAgICAgQ3JlYXRlIHJlY29yZCBpbiBFWFQ2NDAgICAgICAgICAgIC8vIE1XUzY0MFBGDQoJKi8NCiAgcHVibGljIHZvaWQgY3JlYXRlRVhUNjQwKCl7ICANCiAgICAgREJBY3Rpb24gZGJhRVhUNjQwID0gZGF0YWJhc2UudGFibGUoIkVYVDY0MCIpLmluZGV4KCIwMCIpLmJ1aWxkKCkgIA0KICAgICBEQkNvbnRhaW5lciBjb25FWFQ2NDAgPSBkYmFFWFQ2NDAuZ2V0Q29udGFpbmVyKCkNCiAgICAgY29uRVhUNjQwLnNldCgiRVhDT05PIiwgY29tcGFueSkgDQogICAgIGNvbkVYVDY0MC5zZXQoIkVYQ09OTiIsIHNoaXBtZW50KSANCiAgICAgY29uRVhUNjQwLnNldCgiRVhIUFNGIiwgbnVtYmVyT2ZDVUdFWDEpIA0KICAgICBjb25FWFQ2NDAuc2V0KCJFWERMUVQiLCBkZWxpdmVyeVF0eSAtIGFjY05vdEluY2x1ZGVkKSAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlZCB0aGUgRExRVCBmb3IgdGhlIEl0ZW0gd2l0aCBpdGVtdHlwZSAibm90IGluY2x1ZGVkIiwgaS5lLiBtYXJrZWQgaW4gQ1JTMDQwL0NVR0VYMV9DSEIzDQogICAgIGNvbkVYVDY0MC5zZXQoIkVYU0VRTiIsIHNlcXVlbmNlKSANCiAgICAgY29uRVhUNjQwLnNldCgiRVhSR0RUIiwgZW50cnlEYXRlKQ0KICAgICBjb25FWFQ2NDAuc2V0KCJFWExNRFQiLCBlbnRyeURhdGUpDQogICAgIGNvbkVYVDY0MC5zZXQoIkVYUkdUTSIsIGVudHJ5VGltZSkgDQogICAgIGNvbkVYVDY0MC5zZXQoIkVYQ0hOTyIsIDEpIA0KICAgICBjb25FWFQ2NDAuc2V0KCJFWENISUQiLCBwcm9ncmFtLmdldFVzZXIoKSkgDQoNCiAgICAgZGJhRVhUNjQwLmluc2VydChjb25FWFQ2NDApIA0KICAgICAgICAgDQogIH0NCiAgDQogIC8qDQogICAgIENyZWF0ZSByZWNvcmQgaW4gRVhUNjRMICAgICAgICAgLy8gTVdTNjQwUEYNCgkqLw0KICBwdWJsaWMgdm9pZCBjcmVhdGVFWFQ2NEwoKXsgIA0KICAgIGZvciAoaW50IGkgPSAwOyBpIDwgOTk5OTsgaSsrKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICBpZiAoYXJyYXlJdGVtW2ldID09IG51bGwgfHwgYXJyYXlJdGVtW2ldLmlzRW1wdHkoKSl7DQogICAgICAgICAgaSA9IDk5OTkNCiAgICAgICB9ZWxzZXsgIA0KICAgICAgICAgIERCQWN0aW9uIGRiYUVYVDY0TCA9IGRhdGFiYXNlLnRhYmxlKCJFWFQ2NEwiKS5pbmRleCgiMDAiKS5idWlsZCgpICANCiAgICAgICAgICBEQkNvbnRhaW5lciBjb25FWFQ2NEwgPSBkYmFFWFQ2NEwuZ2V0Q29udGFpbmVyKCkNCiAgICAgICAgICBjb25FWFQ2NEwuc2V0KCJFWENPTk8iLCBjb21wYW55KSANCiAgICAgICAgICBjb25FWFQ2NEwuc2V0KCJFWENPTk4iLCBzaGlwbWVudCkgDQogICAgICAgICAgY29uRVhUNjRMLnNldCgiRVhJVE5PIiwgYXJyYXlJdGVtW2ldKSANCiAgICAgICAgICBjb25FWFQ2NEwuc2V0KCJFWE5CSVQiLCBhcnJheU5ick9mSXRlbVtpXSkNCiAgICAgICAgICBjb25FWFQ2NEwuc2V0KCJFWFJHRFQiLCBlbnRyeURhdGUpDQogICAgICAgICAgY29uRVhUNjRMLnNldCgiRVhMTURUIiwgZW50cnlEYXRlKQ0KICAgICAgICAgIGNvbkVYVDY0TC5zZXQoIkVYUkdUTSIsIGVudHJ5VGltZSkgDQogICAgICAgICAgY29uRVhUNjRMLnNldCgiRVhDSE5PIiwgMSkgDQogICAgICAgICAgY29uRVhUNjRMLnNldCgiRVhDSElEIiwgcHJvZ3JhbS5nZXRVc2VyKCkpIA0KDQogICAgICAgICAgZGJhRVhUNjRMLmluc2VydChjb25FWFQ2NEwpICAgDQogICAgICB9ICAgDQogICAgfQ0KICB9DQogIA0KICAgIC8qDQogICAgIENyZWF0ZSByZWNvcmQgaW4gRVhUNjREICAgICAgICAgICAvLyBNV1M2NDBQRg0KCSovDQogIHB1YmxpYyB2b2lkIGNyZWF0ZUVYVDY0RCgpeyANCiAgICAgICBsb2dnZXIuaW5mbygiYXJyYXlVTk51bWJlcltdICAiICsgYXJyYXlJdGVtV2l0aFVOW10pDQogICAgIGZvciAoaW50IGkgPSAwOyBpIDwgOTk5OTsgaSsrKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICBpZiAoYXJyYXlVTk51bWJlcltpXSA9PSBudWxsIHx8IGFycmF5VU5OdW1iZXJbaV0gPT0gMCl7DQogICAgICAgICAgaSA9IDk5OTkNCiAgICAgICB9ZWxzZXsgIA0KICAgICAgICAgaWYoYXJyYXlEZWxpdmVyeVF0eVtpXSA+IDApew0KICAgICAgICAgICBEQkFjdGlvbiBkYmFFWFQ2NEQgPSBkYXRhYmFzZS50YWJsZSgiRVhUNjREIikuaW5kZXgoIjAwIikuYnVpbGQoKSAgDQogICAgICAgICAgIERCQ29udGFpbmVyIGNvbkVYVDY0RCA9IGRiYUVYVDY0RC5nZXRDb250YWluZXIoKQ0KICAgICAgICAgICBjb25FWFQ2NEQuc2V0KCJFWENPTk8iLCBjb21wYW55KSANCiAgICAgICAgICAgY29uRVhUNjRELnNldCgiRVhDT05OIiwgc2hpcG1lbnQpIA0KICAgICAgICAgICBjb25FWFQ2NEQuc2V0KCJFWFNFUU4iLCBzZXF1ZW5jZSsrKSANCiAgICAgICAgICAgY29uRVhUNjRELnNldCgiRVhVTk5OIiwgYXJyYXlVTk51bWJlcltpXSkNCiAgICAgICAgICAgY29uRVhUNjRELnNldCgiRVhETFFUIiwgYXJyYXlEZWxpdmVyeVF0eVtpXSkNCiAgICAgICAgICAgY29uRVhUNjRELnNldCgiRVhHUldFIiwgYXJyYXlHcm9zc1dlaWdodFtpXSkgDQogICAgICAgICAgIGNvbkVYVDY0RC5zZXQoIkVYUkdEVCIsIGVudHJ5RGF0ZSkNCiAgICAgICAgICAgY29uRVhUNjRELnNldCgiRVhMTURUIiwgZW50cnlEYXRlKQ0KICAgICAgICAgICBjb25FWFQ2NEQuc2V0KCJFWFJHVE0iLCBlbnRyeVRpbWUpIA0KICAgICAgICAgICBjb25FWFQ2NEQuc2V0KCJFWENITk8iLCAxKSANCiAgICAgICAgICAgY29uRVhUNjRELnNldCgiRVhDSElEIiwgcHJvZ3JhbS5nZXRVc2VyKCkpIA0KDQogICAgICAgICAgIGRiYUVYVDY0RC5pbnNlcnQoY29uRVhUNjREKSANCiAgICAgICAgIH0gDQogICAgICAgfSAgDQogICAgIH0gIA0KICB9IA0KICANCiAgDQogICAgDQogLyoNCiAgICByZXRyaWV2ZSBhbmQgY2hlY2sgaW5wdXQgcGFyYW1ldGVycw0KCSovDQoJYm9vbGVhbiByZXRyaWV2ZUlucHV0UGFyYW1ldGVycygpIHsNCgkJY29tcGFueSA9IChJbnRlZ2VyKXByb2dyYW0uZ2V0TERBWkQoKS5DT05PIA0KCQkNCgkJcmV0cmlldmVUb2RheXNEYXRlKCkNCgkJDQoJCXJldHVybiB0cnVlDQoJfQ0KCQ0KICANCiAgLyoNCiAgICBHZXQgdG9kYXlzIGRhdGUNCiAgKi8NCiAgcHVibGljIHZvaWQgcmV0cmlldmVUb2RheXNEYXRlKCkgew0KICAgIExvY2FsRGF0ZVRpbWUgZGF0ZVRpbWUgPSBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZS5ub3coKQ0KICAgIGVudHJ5RGF0ZSA9IGRhdGVUaW1lLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpDQogICAgZW50cnlUaW1lID0gZGF0ZVRpbWUuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigiSEhtbXNzIikpLnRvSW50ZWdlcigpDQogIH0NCiAgDQogIA0KICANCn0="}}}