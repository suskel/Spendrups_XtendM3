{"programModules":{"EXT390MI":{"program":"EXT390MI","triggers":{},"transactions":{"AddEXTOCH":{"sourceUuid":"7fdc21f9-a2e3-4b0a-a03d-f26c7deacd88","name":"AddEXTOCH","program":"EXT390MI","description":"Add records in EXTOCH","active":true,"multi":false,"modified":1743272776097,"modifiedBy":"EXT_SK","outputFields":[],"inputFields":[{"name":"WHLO","description":"Warehouse","length":3,"mandatory":true,"type":"A","refField":null},{"name":"REPN","description":"Receiving number","length":10,"mandatory":true,"type":"N","refField":null},{"name":"CUNO","description":"Customer","length":10,"mandatory":false,"type":"A","refField":null},{"name":"RDFI","description":"Ready for Invoice","length":1,"mandatory":false,"type":"N","refField":null},{"name":"IVCD","description":"Invoice created","length":8,"mandatory":false,"type":"N","refField":null},{"name":"IVOR","description":"Invoice order","length":10,"mandatory":false,"type":"A","refField":null},{"name":"CBEI","description":"Credit before inspection","length":1,"mandatory":false,"type":"N","refField":null},{"name":"RMRK","description":"Return mark","length":1,"mandatory":false,"type":"N","refField":null},{"name":"VEXI","description":"Validate std dB, 1 = no and 0 = yes","length":1,"mandatory":false,"type":"N","refField":null}],"utilities":[],"market":"ALL"}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"7fdc21f9-a2e3-4b0a-a03d-f26c7deacd88":{"uuid":"7fdc21f9-a2e3-4b0a-a03d-f26c7deacd88","updated":1752563628276,"updatedBy":"EXT_SK","created":1740659689888,"createdBy":"EXT_SK","apiVersion":"0.15","beVersion":"16.0.0.20250521011729.6","language":"GROOVY","codeHash":"D1DD01BA8F0CF261BB8C87667AC12F53DCA16A5C94DA24ACA7780D1EA2D7D2C5","code":"LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCiBFeHRlbnNpb24gTmFtZTogRVhUMzkwTUkvQWRkRVhUT0NIDQogVHlwZTogRXh0ZW5kTTNUcmFuc2FjdGlvbg0KIFNjcmlwdCBBdXRob3I6IFN1c2FubmEgS2VsbGFuZGVyIC0gRWx2ZW5pdGUNCiBEYXRlOiAyMDI1LTAyLTI3DQogRGVzY3JpcHRpb246IEFkZCByZWNvcmRzIGluIFh0ZW5kTTMgZHluYW1pYyBkQiBFWFRPQ0gsIGFkZGVkIGluZm9ybWF0aW9uIHRvIE9DSEVBRCBpbiBPSVMzOTAgDQoNCiBSZXZpc2lvbiBIaXN0b3J5Og0KIE5hbWUgICAgICAgICAgICAgICAgICAgIERhdGUgICAgICAgICAgICAgVmVyc2lvbiAgICAgICAgICBEZXNjcmlwdGlvbiBvZiBDaGFuZ2VzDQogU3VzYW5uYSBLZWxsYW5kZXIgICAgICAgMjAyNS0wMi0yNyAgICAgICAxLjAgICAgICAgICAgICAgIFNQMDAzMCAtIEFkZCByZWNvcmRzIGluIFh0ZW5kTTMgZHluYW1pYyBkQiBFWFRPQ0gsIGFkZGVkIGluZm9ybWF0aW9uIHRvIE9DSEVBRCBpbiBPSVMzOTANCioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8NCmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZQ0KaW1wb3J0IGphdmEudGltZS5mb3JtYXQuRGF0ZVRpbWVGb3JtYXR0ZXINCnB1YmxpYyBjbGFzcyBBZGRFWFRPQ0ggZXh0ZW5kcyBFeHRlbmRNM1RyYW5zYWN0aW9uIHsgDQogIHByaXZhdGUgZmluYWwgTUlBUEkgbWkNCglwcml2YXRlIGZpbmFsIERhdGFiYXNlQVBJIGRhdGFiYXNlDQoJcHJpdmF0ZSBmaW5hbCBMb2dnZXJBUEkgbG9nZ2VyDQoJcHJpdmF0ZSBmaW5hbCBNSUNhbGxlckFQSSBtaUNhbGxlcg0KCXByaXZhdGUgZmluYWwgUHJvZ3JhbUFQSSBwcm9ncmFtICANCgkNCgkgaW50IGNvbXBhbnkgPSAwIA0KICAgU3RyaW5nIHdhcmVob3VzZSA9ICIiDQogICBsb25nIHJlY2VpdmluZ051bWJlciA9IDANCiAgIFN0cmluZyBjdXN0b21lciA9ICIiDQogICBpbnQgcmVhZHlGb3JJbnZvaWNlID0gMCANCiAgIGludCBpbnZvaWNlQ3JlYXRlZCA9IDAgDQogICBpbnQgY3JlZGl0QmVmb3JlSW5zcGVjdGlvbiA9IDAgDQogICBpbnQgcmV0dXJuTWFyayA9IDAgDQogICBTdHJpbmcgaW52b2ljZU9yZGVyID0gIiINCiAgIGludCB2YWxpZE0zUmVjb3JkID0gMCANCgkgDQoJIGludCBlbnRyeURhdGUgPSAwDQoJIGludCBlbnRyeVRpbWUgPSAwDQoJIA0KCSANCglwdWJsaWMgQWRkRVhUT0NIKE1JQVBJIG1pLCBEYXRhYmFzZUFQSSBkYXRhYmFzZSxQcm9ncmFtQVBJIHByb2dyYW0sIExvZ2dlckFQSSBsb2dnZXIpIHsNCiAgICB0aGlzLm1pID0gbWkNCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2UNCiAgICB0aGlzLmxvZ2dlciA9IGxvZ2dlcg0KICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW0gDQogIH0NCg0KCQ0KICAvKg0KICAgIG1haW4gbWV0aG9kDQogICovDQogIHB1YmxpYyB2b2lkIG1haW4oKSB7ICANCiAgICBpZihyZXRyaWV2ZUlucHV0UGFyYW1ldGVycygpKSB7IA0KICAgICAgY3JlYXRlRVhUT0NIKCkNCiAgICB9IA0KICB9IA0KICAgDQogIC8qDQogICAgIENyZWF0ZSByZWNvcmQgaW4gRVhUT0NIDQoJKi8NCiAgcHVibGljIHZvaWQgY3JlYXRlRVhUT0NIKCl7IA0KICAgIA0KICAgICBpZiAoIWNoZWNrRVhUT0NIKCkpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vIHJlY29yZCBleGlzdA0KICAgICAgICBEQkFjdGlvbiBkYmFFWFRPQ0ggPSBkYXRhYmFzZS50YWJsZSgiRVhUT0NIIikuaW5kZXgoIjAwIikuYnVpbGQoKSAgDQogICAgICAgIERCQ29udGFpbmVyIGNvbkVYVE9DSCA9IGRiYUVYVE9DSC5nZXRDb250YWluZXIoKQ0KICAgICAgICBjb25FWFRPQ0guc2V0KCJFWENPTk8iLCBjb21wYW55KSANCiAgICAgICAgY29uRVhUT0NILnNldCgiRVhXSExPIiwgd2FyZWhvdXNlKSAgICANCiAgICAgICAgY29uRVhUT0NILnNldCgiRVhSRVBOIiwgcmVjZWl2aW5nTnVtYmVyKSAgDQogICAgICAgIGNvbkVYVE9DSC5zZXQoIkVYQ1VOTyIsIGN1c3RvbWVyKSAgICAgDQogICAgICAgIGNvbkVYVE9DSC5zZXQoIkVYUkRGSSIsIHJlYWR5Rm9ySW52b2ljZSkgICAgIA0KICAgICAgICBjb25FWFRPQ0guc2V0KCJFWElWQ0QiLCBpbnZvaWNlQ3JlYXRlZCkgICAgIA0KICAgICAgICBjb25FWFRPQ0guc2V0KCJFWElWT1IiLCBpbnZvaWNlT3JkZXIpICAgICAgIA0KICAgICAgICBjb25FWFRPQ0guc2V0KCJFWENCRUkiLCBjcmVkaXRCZWZvcmVJbnNwZWN0aW9uKSAgICAgICANCiAgICAgICAgY29uRVhUT0NILnNldCgiRVhSTVJLIiwgcmV0dXJuTWFyaykgICAgDQogICAgICAgIGNvbkVYVE9DSC5zZXQoIkVYUkdEVCIsIGVudHJ5RGF0ZSkNCiAgICAgICAgY29uRVhUT0NILnNldCgiRVhMTURUIiwgZW50cnlEYXRlKQ0KICAgICAgICBjb25FWFRPQ0guc2V0KCJFWFJHVE0iLCBlbnRyeVRpbWUpIA0KICAgICAgICBjb25FWFRPQ0guc2V0KCJFWENITk8iLCAxKSANCiAgICAgICAgY29uRVhUT0NILnNldCgiRVhDSElEIiwgcHJvZ3JhbS5nZXRVc2VyKCkpIA0KDQogICAgICAgIGRiYUVYVE9DSC5pbnNlcnQoY29uRVhUT0NIKSANCiAgICAgICANCiAgICAgIH0gICANCiAgfQ0KICANCiAgLyoNCiAgICByZXRyaWV2ZSBhbmQgY2hlY2sgaW5wdXQgcGFyYW1ldGVycyANCgkqLw0KCWJvb2xlYW4gcmV0cmlldmVJbnB1dFBhcmFtZXRlcnMoKSB7DQoJICANCgkJY29tcGFueSA9IChJbnRlZ2VyKXByb2dyYW0uZ2V0TERBWkQoKS5DT05PICANCiAgICB3YXJlaG91c2UgPSByZW1vdmVOdWxsZnJvbVN0cmluZ09iamVjdChtaS5pbi5nZXQoIldITE8iKSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1hbmRhdG9yeSBmaWVsZCAgDQogICAgDQogICAgaWYgKG1pLmdldEluRGF0YSgpLmdldCgiUkVQTiIpLnRyaW0oKSAhPSAiIiAmJiBtaS5nZXRJbkRhdGEoKS5nZXQoIlJFUE4iKSAhPSBudWxsKSB7ICAgICAvLyBtYW5kYXRvcnkgZmllbGQgIA0KCSAgICByZWNlaXZpbmdOdW1iZXIgPSByZW1vdmVOdWxsZnJvbUxvbmdPYmplY3QobWkuZ2V0SW5EYXRhKCkuZ2V0KCJSRVBOIikudHJpbSgpKSAgICAgICAgICAvLyB3cm9uZyBpbiB4dGVuZE0zIGZvdW5kYXRpb24NCiAgICB9DQogICAgDQogICAgY3VzdG9tZXIgPSByZW1vdmVOdWxsZnJvbVN0cmluZ09iamVjdChtaS5pbi5nZXQoIkNVTk8iKSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYW5kYXRvcnkgZmllbGQgID8NCiAgICANCiAgICAgDQogICAgaWYoY2hlY2tFWFRPQ0goKSl7DQogICAgICAgbWkuZXJyb3IoIlJlY29yZCBkb2VzIGFscmVhZHkgZXhpc3QiKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcmVjb3JkIGFscmVhZHkgZXhpc3QsIGVuZCBwcm9jZXNzDQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9ICAgIA0KICAgIA0KICAgICAgICANCiAgICByZWFkeUZvckludm9pY2UgPSByZW1vdmVOdWxsZnJvbUludE9iamVjdChtaS5pbi5nZXQoIlJERkkiKSkgIA0KICAgIGlmKCFpc1ZhbGlkSW5wdXQocmVhZHlGb3JJbnZvaWNlKSl7IA0KICAgICAgbWkuZXJyb3IoIlJlYWR5IGZvciBpbnZvaWNlICR7cmVhZHlGb3JJbnZvaWNlfSBtdXN0IGJlIDAgb3IgMSIpDQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9DQogICAgDQogICAgaW52b2ljZUNyZWF0ZWQgPSByZW1vdmVOdWxsZnJvbUludE9iamVjdChtaS5pbi5nZXQoIklWQ0QiKSkgICAgIA0KICAgIGlmKGludm9pY2VDcmVhdGVkID4gMCl7DQogICAgIGlmICghY2hlY2tDU1lDQUwoaW52b2ljZUNyZWF0ZWQpKSB7ICAgDQogICAgICAgIG1pLmVycm9yKCJJbnZvaWNlIGNyZWF0ZWQgZGF0ZSAke2ludm9pY2VDcmVhdGVkfSBpcyBpbnZhbGlkIikgDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfSAgDQoJICB9DQoJICANCiAgICBpbnZvaWNlT3JkZXIgPSByZW1vdmVOdWxsZnJvbVN0cmluZ09iamVjdChtaS5pbi5nZXQoIklWT1IiKSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICANCg0KICAgIGNyZWRpdEJlZm9yZUluc3BlY3Rpb24gPSByZW1vdmVOdWxsZnJvbUludE9iamVjdChtaS5pbi5nZXQoIkNCRUkiKSkgIA0KICAgIGlmKCFpc1ZhbGlkSW5wdXQoY3JlZGl0QmVmb3JlSW5zcGVjdGlvbikpeyANCiAgICAgIG1pLmVycm9yKCJDcmVkaXQgYmVmb3JlIGluc3BlY3Rpb24gJHtjcmVkaXRCZWZvcmVJbnNwZWN0aW9ufSBtdXN0IGJlIDAgb3IgMSIpDQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9DQogICAgDQogICAgDQogICAgcmV0dXJuTWFyayA9IHJlbW92ZU51bGxmcm9tSW50T2JqZWN0KG1pLmluLmdldCgiUk1SSyIpKSAgDQogICAgaWYoIWlzVmFsaWRJbnB1dChyZXR1cm5NYXJrKSl7IA0KICAgICAgbWkuZXJyb3IoIlJldHVybiBtYXJrICR7cmV0dXJuTWFya30gbXVzdCBiZSAwIG9yIDEiKQ0KICAgICAgcmV0dXJuIGZhbHNlDQogICAgfQ0KICAgIA0KICAgIA0KICAgIHZhbGlkTTNSZWNvcmQgPSByZW1vdmVOdWxsZnJvbUludE9iamVjdChtaS5pbi5nZXQoIlZFWEkiKSkgICAgICAgIA0KICAgIGlmKCFpc1ZhbGlkSW5wdXQodmFsaWRNM1JlY29yZCkpeyANCiAgICAgIG1pLmVycm9yKCJWYWxpZCBNMyByZWNvcmQgdmFsdWUgJHt2YWxpZE0zUmVjb3JkfSBtdXN0IGJlIDAgb3IgMSIpDQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9DQogICANCiAgICBpZih2YWxpZE0zUmVjb3JkID09IDApeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdCB2YWxpZGF0ZSBpZiBNMyByZWNvcmQgZXhpc3QgPSAxLiBDYW5ub3QgYWx3YXlzIGJlIHZhbGlkYXRlIGR1ZSB0byBzY3JpcHQgaW4gT0lTMzkwLCBidXQgdXNlIHdoZW4gbWlncmF0aW9uIGFuZCBNSS10ZXN0DQogICAgICBpZiAoIWNoZWNrT0NIRUFEKCkpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkb2VzIHRoZSByZWNvcmQgbm90IGV4aXN0IGluIE9DSEVBRCwgZW5kIHByb2Nlc3MNCiAgICAgICAgIG1pLmVycm9yKCJSZWNvcmQgZG9lcyBub3QgZXhpc3QgaW4gT0NIRUFEL09JUzM5MCBmb3IgdGhlIHJlY2VpdmluZyBudW1iZXIgJHtyZWNlaXZpbmdOdW1iZXJ9IikNCiAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICB9DQogICAgfWVsc2V7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIG5vIHZhbGlkYXRpb24sIHRoZSBzZXBhcmF0ZSBmaWVsZHMgbmVlZCB0byBiZSB2YWxpZGF0ZQ0KICAgICAgaWYgKCFjaGVja01JVFdITCh3YXJlaG91c2UpKSB7ICANCiAgICAgICAgIG1pLmVycm9yKCJXYXJlaG91c2UgJHt3YXJlaG91c2V9IGRvZXMgbm90IGV4aXN0IikNCiAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICB9ICANCiAgICAgIGlmICghY2hlY2tPQ1VTTUEoY3VzdG9tZXIpKSB7ICANCiAgICAgICAgIG1pLmVycm9yKCJDdXN0b21lciAke2N1c3RvbWVyfSBkb2VzIG5vdCBleGlzdCIpDQogICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgIH0gDQogICAgfQ0KICAgIA0KICAgIHJldHJpZXZlVG9kYXlzRGF0ZSgpDQogICAgDQogICAgcmV0dXJuIHRydWUNCgl9DQogDQogDQogIC8qDQogICAgUmV0dXJuIHRydWUgaWYgcmVjb3JkIGV4aXN0LiANCiAgKi8NCiAgYm9vbGVhbiBjaGVja0VYVE9DSCgpIHsNCiAgICANCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJFWFRPQ0giKS5pbmRleCgiMDAiKS5idWlsZCgpICANCiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQ0KICAgIGNvbnRhaW5lci5zZXQoIkVYQ09OTyIsIGNvbXBhbnkpIA0KICAgIGNvbnRhaW5lci5zZXQoIkVYV0hMTyIsIHdhcmVob3VzZSkgICAgDQogICAgY29udGFpbmVyLnNldCgiRVhSRVBOIiwgcmVjZWl2aW5nTnVtYmVyKSAgDQogICAgY29udGFpbmVyLnNldCgiRVhDVU5PIiwgY3VzdG9tZXIpICAgICANCiAgICAgIA0KICAgIGJvb2xlYW4gZm91bmQgPSBxdWVyeS5yZWFkKGNvbnRhaW5lcikNCiAgICANCiAgICBpZiAoIWZvdW5kKSAgew0KICAgICAgcmV0dXJuIGZhbHNlICANCiAgICB9DQogICAgIA0KICAgIHJldHVybiB0cnVlDQogIH0NCiANCiAgDQogIC8qDQogICAgUmV0dXJuIHRydWUgaWYgcmVjb3JkIGV4aXN0LiANCiAgKi8NCiAgYm9vbGVhbiBjaGVja09DSEVBRCgpIHsNCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJPQ0hFQUQiKS5pbmRleCgiMDAiKS5idWlsZCgpDQogICAgDQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkNCiAgICBjb250YWluZXIuc2V0KCJPQ0NPTk8iLCBjb21wYW55KQ0KICAgIGNvbnRhaW5lci5zZXQoIk9DV0hMTyIsIHdhcmVob3VzZSkgDQogICAgY29udGFpbmVyLnNldCgiT0NSRVBOIiwgcmVjZWl2aW5nTnVtYmVyKSANCiAgICBjb250YWluZXIuc2V0KCJPQ0NVTk8iLCBjdXN0b21lcikgDQogICAgDQogICAgYm9vbGVhbiBmb3VuZCA9IHF1ZXJ5LnJlYWQoY29udGFpbmVyKQ0KICAgIA0KICAgIGlmICghZm91bmQpICB7DQogICAgICByZXR1cm4gZmFsc2UgIA0KICAgIH0NCiAgICAgDQogICAgcmV0dXJuIHRydWUNCiAgfQ0KICAgIA0KICANCiAgIA0KICAvKg0KICAgIFJldHVybiB0cnVlIGlmIHJlY29yZCBleGlzdC4gDQogICovDQogICBib29sZWFuIGNoZWNrQ1NZQ0FMKGludCBpbklWQ0QpIHsNCiAgICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiQ1NZQ0FMIikuaW5kZXgoIjAwIikuYnVpbGQoKQ0KICAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQ0KICAgICBjb250YWluZXIuc2V0KCJDRENPTk8iLCBjb21wYW55KSAgIA0KICAgICBjb250YWluZXIuc2V0KCJDRERJVkkiLCAiICIpICANCiAgICAgY29udGFpbmVyLnNldCgiQ0RZTUQ4IiwgaW5JVkNEKSAgIA0KICAgIA0KICAgICBib29sZWFuIGZvdW5kID0gcXVlcnkucmVhZChjb250YWluZXIpDQogICAgICAgDQogICAgIGlmICghZm91bmQpICB7DQogICAgICAgcmV0dXJuIGZhbHNlICANCiAgICAgfWVsc2Ugew0KICAgICAgIHJldHVybiB0cnVlDQogICAgIH0gDQogICB9DQogICANCiAgIA0KICAvKg0KICAgIFJldHVybiB0cnVlIGlmIHJlY29yZCBleGlzdC4gDQogICovDQogIGJvb2xlYW4gY2hlY2tNSVRXSEwoU3RyaW5nIGluV0hMTykgew0KICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk1JVFdITCIpLmluZGV4KCIwMCIpLmJ1aWxkKCkNCiAgICANCiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQ0KICAgIGNvbnRhaW5lci5zZXQoIk1XQ09OTyIsIGNvbXBhbnkpDQogICAgY29udGFpbmVyLnNldCgiTVdXSExPIiwgaW5XSExPKSANCiAgICANCiAgICBib29sZWFuIGZvdW5kID0gcXVlcnkucmVhZChjb250YWluZXIpDQogICAgDQogICAgaWYgKCFmb3VuZCkgIHsNCiAgICAgIHJldHVybiBmYWxzZSAgDQogICAgfQ0KICAgICANCiAgICByZXR1cm4gdHJ1ZQ0KICAgICAgDQogIH0NCiAgICANCiAgICANCiAgICANCiAgLyoNCiAgICBSZXR1cm4gdHJ1ZSBpZiByZWNvcmQgZXhpc3QuIA0KICAqLw0KICBib29sZWFuIGNoZWNrT0NVU01BKFN0cmluZyBpbkNVTk8pIHsNCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJPQ1VTTUEiKS5pbmRleCgiMDAiKS5idWlsZCgpDQogICAgDQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkNCiAgICBjb250YWluZXIuc2V0KCJPS0NPTk8iLCBjb21wYW55KQ0KICAgIGNvbnRhaW5lci5zZXQoIk9LQ1VOTyIsIGluQ1VOTykgDQogICAgDQogICAgYm9vbGVhbiBmb3VuZCA9IHF1ZXJ5LnJlYWQoY29udGFpbmVyKQ0KICAgIA0KICAgIGlmICghZm91bmQpICB7DQogICAgICByZXR1cm4gZmFsc2UgIA0KICAgIH0NCiAgICAgDQogICAgcmV0dXJuIHRydWUNCiAgICAgIA0KICB9DQogICAgDQogIC8qDQogICAgUmV0dXJuIHRydWUgaWYgcmVjb3JkIGV4aXN0LiANCiAgKi8NCiAgYm9vbGVhbiBpc1ZhbGlkSW5wdXQoaW50IGluRkxEKSB7DQogICAgaWYoaW5GTEQgPCAwIHx8IGluRkxEID4gMSl7ICANCiAgICAgICByZXR1cm4gZmFsc2UNCiAgICB9DQogICAgICByZXR1cm4gdHJ1ZSAgDQogIH0NCiAgDQogIA0KICAvKg0KICAgIEdldCB0b2RheXMgZGF0ZQ0KICAqLw0KICBwdWJsaWMgdm9pZCByZXRyaWV2ZVRvZGF5c0RhdGUoKSB7DQogICAgTG9jYWxEYXRlVGltZSBkYXRlVGltZSA9IExvY2FsRGF0ZVRpbWUubm93KCkNCiAgICBlbnRyeURhdGUgPSBkYXRlVGltZS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJ5eXl5TU1kZCIpKS50b0ludGVnZXIoKQ0KICAgIGVudHJ5VGltZSA9IGRhdGVUaW1lLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oIkhIbW1zcyIpKS50b0ludGVnZXIoKQ0KICB9DQogDQogICANCiAgLy8gY2hlY2sgaWYgZmllbGQgZnJvbSBNSSBpcyBudWxsLiBSZXR1cm4gemVybyBpbiB0aGF0IGNhc2UNCiAgaW50IHJlbW92ZU51bGxmcm9tSW50T2JqZWN0KE9iamVjdCBmaWVsZCl7DQogICAgIGlmIChmaWVsZCA9PSBudWxsKSB7ICANCiAgICAgICByZXR1cm4gMA0KICAgICB9IGVsc2Ugew0KICAgICAgIHJldHVybiAoaW50KSBmaWVsZA0KICAgICB9DQogICB9DQogIA0KICAgLy8gY2hlY2sgaWYgZmllbGQgZnJvbSBNSSBpcyBudWxsLiBSZXR1cm4gZW1wdHkgc3RyaW5nIGluIHRoYXQgY2FzZQ0KICAgU3RyaW5nIHJlbW92ZU51bGxmcm9tU3RyaW5nT2JqZWN0KE9iamVjdCBmaWVsZCl7DQogICAgIGlmIChmaWVsZCA9PSBudWxsKSB7ICANCiAgICAgICByZXR1cm4gIiINCiAgICAgfSBlbHNlIHsNCiAgICAgICByZXR1cm4gZmllbGQNCiAgICAgfQ0KICAgfQ0KICAgDQogICAJLy8gY2hlY2sgaWYgZmllbGQgZnJvbSBNSSBpcyBudWxsLiBSZXR1cm4gemVybyBpbiB0aGF0IGNhc2UNCglsb25nIHJlbW92ZU51bGxmcm9tTG9uZ09iamVjdChTdHJpbmcgZmllbGQpew0KCQlpZiAoZmllbGQgPT0gbnVsbCkgeyAgDQoJCQlyZXR1cm4gMA0KCQkJfSBlbHNlIHsNCgkJCXJldHVybiBMb25nLnBhcnNlTG9uZyhmaWVsZCApIA0KCQl9DQoJfQ0KCQ0KICANCn0gDQog"}}}