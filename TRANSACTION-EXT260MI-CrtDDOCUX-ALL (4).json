{"programModules":{"EXT260MI":{"program":"EXT260MI","triggers":{},"transactions":{"CrtDDOCUX":{"sourceUuid":"6ee637f0-edad-4d0c-bd92-eb72029740ca","name":"CrtDDOCUX","program":"EXT260MI","description":"Add record in DDOCUX","active":true,"multi":false,"modified":1742916316337,"modifiedBy":"EXT_SK","outputFields":[],"inputFields":[{"name":"INOU","description":"Direction","length":1,"mandatory":true,"type":"N","refField":null},{"name":"DONR","description":"Documentnumber","length":3,"mandatory":true,"type":"A","refField":null},{"name":"DOVA","description":"Documentvariant","length":2,"mandatory":false,"type":"A","refField":null},{"name":"KCON","description":"Shipment","length":7,"mandatory":false,"type":"N","refField":null}],"utilities":[],"market":"ALL"}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"6ee637f0-edad-4d0c-bd92-eb72029740ca":{"uuid":"6ee637f0-edad-4d0c-bd92-eb72029740ca","updated":1742917332963,"updatedBy":"EXT_SK","created":1740060874054,"createdBy":"EXT_SK","apiVersion":"0.21","beVersion":"16.0.0.20250122200256.4","language":"GROOVY","codeHash":"A1A79FC03CE2317C24ED7D16D39E89E688CE638915CC86070DBCA1FFBCDA4964","code":"ICAvKiogIA0KCSAgICogIFNQMDAyOSAtIENyZWF0ZSByZWNvcmQgaW4gRERPQ1VYIGZvciBkb2N1bWVudCAiOTIwLzAxIiwgIE1XUzY0MFBGDQoJICAgKiAgRVhUMjYwTUkuQ3J0RERPQ1VYIC0gDQoJICAgKiAgQHJlc3BvbnNpYmxlIGRldmVsb3BlcnM6IFN1c2FubmEgS2VsbGFuZGVyIEVsdmVuaXRlDQoJICAgKiAgQHZlcnNpb24gMS4wIENoYW5nZSBsb2c6IE5ldyBwcm9ncmFtDQoJICAgKiAgQHZlcnNpb24gMS54IENoYW5nZSBsb2c6IChmaWxsIGluIHdpdGggdGV4dCkNCgkgKi8NCmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZQ0KaW1wb3J0IGphdmEudGltZS5mb3JtYXQuRGF0ZVRpbWVGb3JtYXR0ZXINCnB1YmxpYyBjbGFzcyBDcnRERE9DVVggZXh0ZW5kcyBFeHRlbmRNM1RyYW5zYWN0aW9uIHsgDQogIHByaXZhdGUgZmluYWwgTUlBUEkgbWkNCiAgcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZQ0KICBwcml2YXRlIGZpbmFsIFByb2dyYW1BUEkgcHJvZ3JhbQ0KICBwcml2YXRlIGZpbmFsIExvZ2dlckFQSSBsb2dnZXINCglwcml2YXRlIGZpbmFsIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyIA0KICANCiAgaW50IGNvbXBhbnkgPSAwDQogIGludCBpbk91dCA9IDAgIA0KICBTdHJpbmcgZG9jdW1lbnROdW1iZXIgPSAiIg0KICBTdHJpbmcgZG9jdW1lbnRWYXJpYW50ID0gIiIgDQogIFN0cmluZyB3YXJlaG91c2UgPSAiIg0KICBpbnQgc2hpcG1lbnQgPSAwDQogIA0KICBsb25nIG5leHROdW1iZXJMb25nID0gMA0KICBTdHJpbmcgbmV4dE51bWJlciA9ICIiDQogIFN0cmluZyBudW1iZXJTZXJpZVR5cGUgPSAiIg0KICBjaGFyIG51bWJlclNlcmllID0gJyAnDQogIFN0cmluZyBtYXN0ZXJCb2xOdW1iZXI9ICIiDQogIA0KICBpbnQgZW50cnlEYXRlID0gMA0KICBpbnQgZW50cnlUaW1lID0gMA0KICANCiAgDQogIHB1YmxpYyBDcnRERE9DVVgoTUlBUEkgbWksIERhdGFiYXNlQVBJIGRhdGFiYXNlLCBQcm9ncmFtQVBJIHByb2dyYW0sIExvZ2dlckFQSSBsb2dnZXIsIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyKSB7DQogICAgdGhpcy5taSA9IG1pDQogICAgdGhpcy5kYXRhYmFzZSA9IGRhdGFiYXNlDQogICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbQ0KICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyDQogICAgdGhpcy5taUNhbGxlciA9IG1pQ2FsbGVyDQogIH0gICANCiAgDQogIC8qDQogICAgbWFpbiBtZXRob2QNCiAgKi8NCiAgcHVibGljIHZvaWQgbWFpbigpIHsgIA0KICAgIGlmKHJldHJpZXZlSW5wdXRQYXJhbWV0ZXJzKCkpIHsgDQogICAgICBjcmVhdGVERE9DVVgoKQ0KICAgIH0gDQogIH0gDQogICANCiAgLyoNCiAgICBjcmVhdGVERE9DVVggLSBjcmVhdGUgcmVjb3JkIGluIERET0NVWCwgTVdTMjYwLCBmw7ZyIGRvY3VtZW50ICI5MjAvMDAiIA0KICAqLw0KICBwdWJsaWMgdm9pZCBjcmVhdGVERE9DVVgoKSB7IA0KICAgIA0KICAgIGlmKCFjaGVja0RET0NVWCgpKXsNCiAgICAgIERCQWN0aW9uIHFyeURET0NVWCA9IGRhdGFiYXNlLnRhYmxlKCJERE9DVVgiKS5pbmRleCgiMDAiKS5idWlsZCgpDQogICAgICBEQkNvbnRhaW5lciBjb25ERE9DVVggPSBxcnlERE9DVVguZ2V0Q29udGFpbmVyKCkgDQogICAgICBjb25ERE9DVVguc2V0KCJEQkNPTk8iLCBjb21wYW55KQ0KICAgICAgY29uRERPQ1VYLnNldCgiREJJTk9VIiwgaW5PdXQpIA0KICAgICAgY29uRERPQ1VYLnNldCgiREJET05SIiwgZG9jdW1lbnROdW1iZXIpDQogICAgICBjb25ERE9DVVguc2V0KCJEQkRPVkEiLCBkb2N1bWVudFZhcmlhbnQpIA0KICAgICAgY29uRERPQ1VYLnNldCgiREJLQ09OIiwgc2hpcG1lbnQpDQogICAgICANCiAgICAgIGNvbkRET0NVWC5zZXQoIkRCR0VEVCIsIDApDQogICAgICBjb25ERE9DVVguc2V0KCJEQkdFVE0iLCAwKQ0KICAgICAgY29uRERPQ1VYLnNldCgiREJET0RUIiwgMCkNCiAgICAgIGNvbkRET0NVWC5zZXQoIkRCUE9USSIsIDApDQogICAgICBjb25ERE9DVVguc2V0KCJEQkZEQ0ciLCAwKQ0KICAgICAgY29uRERPQ1VYLnNldCgiREJGRE1BIiwgMSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vID0gYWRkZWQgbWFudWFsIA0KICAgICAgY29uRERPQ1VYLnNldCgiREJDT05OIiwgc2hpcG1lbnQpDQogICAgICBjb25ERE9DVVguc2V0KCJEQldITE8iLCB3YXJlaG91c2UpDQogICAgICBjb25ERE9DVVguc2V0KCJEQkZEU1QiLCAiMDUiKQ0KDQogICAgICANCiAgICAgIGdldERlbGl2ZXJ5RG9jdW1lbnROdW1iZXIobnVtYmVyU2VyaWUsIG51bWJlclNlcmllVHlwZSkNCiAgICAgIFN0cmluZyBuZXh0TnVtYmVyQWxwaGEgPSBuZXh0TnVtYmVyTG9uZy50b1N0cmluZygpLnBhZExlZnQoMTAsICIwIikgICAgICAgICAgICAgICAgLy8gbW92ZSBudW1lcmljIHRvIFN0cmluZyBhbmQgZmlsbCB3aXRoIDANCiAgICAgIGNvbkRET0NVWC5zZXQoIkRCRkROTyIsbmV4dE51bWJlckFscGhhKSANCiAgICAgIA0KICAgICAgY29uRERPQ1VYLnNldCgiREJNQk9MIiwgZ2V0Qm9sTm8obmV4dE51bWJlckFscGhhKSkNCiAgICAgIGNvbkRET0NVWC5zZXQoIkRCQ01CTCIsIDEpIA0KICAgDQogICANCiAgICAgIGNvbkRET0NVWC5zZXQoIkRCUkdEVCIsIGVudHJ5RGF0ZSkNCiAgICAgIGNvbkRET0NVWC5zZXQoIkRCTE1EVCIsIGVudHJ5RGF0ZSkNCiAgICAgIGNvbkRET0NVWC5zZXQoIkRCUkdUTSIsIGVudHJ5VGltZSkgDQogICAgICBjb25ERE9DVVguc2V0KCJEQkNITk8iLCAxKSANCiAgICAgIGNvbkRET0NVWC5zZXQoIkRCQ0hJRCIsIHByb2dyYW0uZ2V0VXNlcigpKSANCiANCiAgICAgIHFyeURET0NVWC5pbnNlcnQoY29uRERPQ1VYKSAgDQogICAgfSANCiAgfSAgDQogIA0KICANCiAgLyoNCiAgICByZXRyaWV2ZSBudW1iZXIgZnJvbSBudW1iZXIgc2VyaWUgDQogICovDQogIGJvb2xlYW4gZ2V0RGVsaXZlcnlEb2N1bWVudE51bWJlciggY2hhciBpbk5CSUQsIFN0cmluZyBpbk5CVFkpIHsNCiAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHBhcmFtZXRlcnMgPSBbIk5CVFkiOiBpbk5CVFksICJOQklEIjogaW5OQklELnRvU3RyaW5nKCldDQogICAgbmV4dE51bWJlciA9ICIiIA0KICANCiAgICBDbG9zdXJlPD8+IGhhbmRsZXIgPSB7IE1hcDxTdHJpbmcsIFN0cmluZz4gcmVzcG9uc2UgLT4NCiAgICAgIGlmIChyZXNwb25zZS5jb250YWluc0tleSgnZXJyb3JNc2lkJykgfHwgcmVzcG9uc2UuZXJyb3IgPT0gdHJ1ZSkgeyAgICAgDQogICAgICB9IGVsc2Ugew0KICAgICAgICBpZihyZXNwb25zZS5OQk5SICE9IG51bGwpew0KICAgICAgICAgIG5leHROdW1iZXIgPSByZXNwb25zZS5OQk5SDQogICAgICAgICAgaWYgKG5leHROdW1iZXIuaXNMb25nKCkpIHsNCiAgICAgICAgICAgIG5leHROdW1iZXJMb25nID0gbmV4dE51bWJlciBhcyBMb25nDQogICAgICAgICAgfQ0KICAgICAgICAgIGxvZ2dlci5pbmZvKCJuZXh0TnVtYmVyICIgKyBuZXh0TnVtYmVyICsgIiBuZXh0TnVtYmVyTG9uZyAiICsgbmV4dE51bWJlckxvbmcpDQogICAgICAgIH0gDQogICAgICB9DQogICAgfQ0KIA0KICAgIG1pQ2FsbGVyLmNhbGwoIkNSUzE2NU1JIiwgIlJ0dk5leHROdW1iZXIiLCBwYXJhbWV0ZXJzLCBoYW5kbGVyKQ0KICAgIGlmIChuZXh0TnVtYmVyID09ICIiKSB7DQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9DQogICAgcmV0dXJuIHRydWUNCiAgfQ0KICAgDQogDQogIA0KICAgIA0KICAgLyoNCiAgICBnZXRCb2xObyAtIEJpbGwgb2YgTGFkaW5nIG51bWJlcg0KICAqLw0KICBTdHJpbmcgZ2V0Qm9sTm8oU3RyaW5nIGluRkROTykgeyAgDQogICAgDQogICAgU3RyaW5nIG51bWJlciA9IGdldENTWVBBUihnZXRNSVRXSEwod2FyZWhvdXNlKSkgKyBpbkZETk8NCiAgICBsb2dnZXIuZGVidWcoImdldEJvbE5vIG51bWJlciAiICsgbnVtYmVyICsgIiBsZW5ndGggIiArIG51bWJlci5sZW5ndGgoKSArICIgaW5GRE5PICIgKyBpbkZETk8gKyAiIENSUzcwNiAiICsgZ2V0Q1NZUEFSKGdldE1JVFdITCh3YXJlaG91c2UpKSkNCiAgICBpbnQgc3VtID0gMA0KICAgIGJvb2xlYW4gYWx0ZXJuYXRlID0gZmFsc2UNCg0KICAgIGZvciAoaW50IGkgPSBudW1iZXIubGVuZ3RoKCkgLSAxOyBpID49IDA7IGktLSkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgaW50IG4gPSBJbnRlZ2VyLnBhcnNlSW50KG51bWJlci5zdWJzdHJpbmcoaSwgaSArIDEpKQ0KICAgICAgICBpZiAoYWx0ZXJuYXRlKSB7DQogICAgICAgICAgICBuICo9IDINCiAgICAgICAgICAgIGlmIChuID4gMTUpIHsNCiAgICAgICAgICAgICAgICBuID0gKG4gJSAxNikgKyAxDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgc3VtICs9IG4NCiAgICAgICAgYWx0ZXJuYXRlID0gIWFsdGVybmF0ZQ0KICAgIH0NCg0KICAgIGludCBjaGVja0RpZ2l0ID0gKDE2IC0gKHN1bSAlIDE2KSkgJSAxNiANCiAgICBsb2dnZXIuZGVidWcoImdldEJvbE5vIGNoZWNrRGlnaXQgIiArIGNoZWNrRGlnaXQpIA0KICAgIA0KICAgIHJldHVybiBudW1iZXIgKyBjaGVja0RpZ2l0LnRvU3RyaW5nKCkNCg0KICB9DQoNCiAgICAgICANCiAgLyoNCiAgICByZXRyaWV2ZSBhbmQgY2hlY2sgaW5wdXQgcGFyYW1ldGVycyANCgkqLw0KCWJvb2xlYW4gcmV0cmlldmVJbnB1dFBhcmFtZXRlcnMoKSB7DQoJICANCgkJY29tcGFueSA9IChJbnRlZ2VyKXByb2dyYW0uZ2V0TERBWkQoKS5DT05PICANCiAgICBpbk91dCA9IHJlbW92ZU51bGxmcm9tSW50T2JqZWN0KG1pLmluLmdldCgiSU5PVSIpKSAgICANCiAgICBkb2N1bWVudE51bWJlciA9IHJlbW92ZU51bGxmcm9tU3RyaW5nT2JqZWN0KG1pLmluLmdldCgiRE9OUiIpKQ0KICAgIGRvY3VtZW50VmFyaWFudCA9IHJlbW92ZU51bGxmcm9tU3RyaW5nT2JqZWN0KG1pLmluLmdldCgiRE9WQSIpKSANCiAgICBzaGlwbWVudCA9IHJlbW92ZU51bGxmcm9tSW50T2JqZWN0KG1pLmluLmdldCgiS0NPTiIpKSAgIA0KICAgDQogICAgaWYoIWNoZWNrTUhESVNIKGluT3V0LCBzaGlwbWVudCkpew0KICAgICAgbWkuZXJyb3IoIlRoZSBzaGlwbWVudCAke3NoaXBtZW50fSBkb2VzIG5vdCBleGlzdCBpbiBNSERJU0giKQ0KICAgICAgcmV0dXJuIGZhbHNlDQogICAgfQ0KDQogICAgDQogICAgaWYoIWlzVmFsaWREb2N1bWVudChkb2N1bWVudE51bWJlciwgZG9jdW1lbnRWYXJpYW50KSl7DQogICAgICBtaS5lcnJvcigiVGhlIGRvY3VtZW50TnVtYmVyICR7ZG9jdW1lbnROdW1iZXJ9LyAke2RvY3VtZW50VmFyaWFudH0gaXMgbm90IHZhbGlkIikNCiAgICAgIHJldHVybiBmYWxzZQ0KICAgIH0NCiAgICANCiAgICBnZXRPREVET0MoKQ0KICAgIA0KICAgIHJldHJpZXZlVG9kYXlzRGF0ZSgpDQogICAgDQogICAgcmV0dXJuIHRydWUNCgl9DQoJDQoJDQogICAvKg0KICAgIFJldHVybiB0cnVlIGlmIHJlY29yZCBleGlzdC4gDQogICovDQogIGJvb2xlYW4gY2hlY2tERE9DVVgoKSB7DQogICAgDQogICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiRERPQ1VYIikuaW5kZXgoIjEwIikuYnVpbGQoKSAgDQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkNCiAgICBjb250YWluZXIuc2V0KCJEQkNPTk8iLCBjb21wYW55KQ0KICAgIGNvbnRhaW5lci5zZXQoIkRCSU5PVSIsIGluT3V0KQ0KICAgIGNvbnRhaW5lci5zZXQoIkRCRExJWCIsIDApDQogICAgY29udGFpbmVyLnNldCgiREJET05SIiwgZG9jdW1lbnROdW1iZXIpDQogICAgY29udGFpbmVyLnNldCgiREJET1ZBIiwgZG9jdW1lbnRWYXJpYW50KSANCiAgICBjb250YWluZXIuc2V0KCJEQktDT04iLCBzaGlwbWVudCkgDQogICAgDQogICAgYm9vbGVhbiBmb3VuZCA9IHF1ZXJ5LnJlYWQoY29udGFpbmVyKQ0KICAgIA0KICAgIGlmICghZm91bmQpICB7ICANCiAgICAgIHJldHVybiBmYWxzZSAgDQogICAgfQ0KICAgICANCiAgICByZXR1cm4gdHJ1ZQ0KICB9DQogIA0KICANCg0KICAJDQogIC8qDQogICAgUmV0dXJuIHRydWUgaWYgcmVjb3JkIGV4aXN0LiANCiAgKi8NCiAgYm9vbGVhbiBnZXRPREVET0MoKSB7DQogICAgDQogICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiT0RFRE9DIikuc2VsZWN0aW9uKCJPWU5CSUQiLCAiT1lOQlRZIikuaW5kZXgoIjAwIikuYnVpbGQoKSAgDQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkNCiAgICBjb250YWluZXIuc2V0KCJPWUNPTk8iLCBjb21wYW55KSANCiAgICBjb250YWluZXIuc2V0KCJPWURPTlIiLCBkb2N1bWVudE51bWJlcikNCiAgICBjb250YWluZXIuc2V0KCJPWURPVkEiLCBkb2N1bWVudFZhcmlhbnQpICANCiAgICANCiAgICBib29sZWFuIGZvdW5kID0gcXVlcnkucmVhZChjb250YWluZXIpDQogICAgDQogICAgaWYgKCFmb3VuZCkgIHsNCiAgICAgIHJldHVybiBmYWxzZSAgDQogICAgfQ0KICAgIA0KICAgIG51bWJlclNlcmllVHlwZSA9IGNvbnRhaW5lci5nZXRTdHJpbmcoIk9ZTkJUWSIpIA0KICAgIG51bWJlclNlcmllID0gY29udGFpbmVyLmdldENoYXIoIk9ZTkJJRCIpIA0KICAgIA0KICAgIHJldHVybiB0cnVlDQogIH0NCiAgDQogIC8qDQogICAgZ2V0TUlUV0hMIC0gcmV0dXJuIGRpdmlzaW9uIGZvciBhY3R1YWwgd2FyZWhvdXNlDQogICovDQogIFN0cmluZyBnZXRNSVRXSEwoU3RyaW5nIGluV0hMTykgew0KICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk1JVFdITCIpLnNlbGVjdGlvbigiTVdESVZJIikuaW5kZXgoIjAwIikuYnVpbGQoKQ0KICAgIA0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpDQogICAgY29udGFpbmVyLnNldCgiTVdDT05PIiwgY29tcGFueSkNCiAgICBjb250YWluZXIuc2V0KCJNV1dITE8iLCBpbldITE8pIA0KICAgIA0KICAgIGJvb2xlYW4gZm91bmQgPSBxdWVyeS5yZWFkKGNvbnRhaW5lcikNCiAgICANCiAgICBpZiAoIWZvdW5kKSAgew0KICAgICAgcmV0dXJuICIiICANCiAgICB9DQogICAgIA0KICAgIHJldHVybiBjb250YWluZXIuZ2V0U3RyaW5nKCJNV0RJVkkiKQ0KICAgICAgDQogIH0NCiAgDQogIC8qDQogICAgZ2V0Q1NZUEFSIC0gcmV0dXJuIHBhcmFtZXRlciBmcm9tIENSUzcwMiwgdXNlZCB3aGVuIGNyZWF0aW5nIEJvbCBudW1iZXINCiAgKi8NCiAgU3RyaW5nIGdldENTWVBBUihTdHJpbmcgaW5ESVZJKSB7DQogICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiQ1NZUEFSIikuc2VsZWN0aW9uKCJDUFBBUk0iKS5pbmRleCgiMDAiKS5idWlsZCgpDQogICAgDQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkNCiAgICBjb250YWluZXIuc2V0KCJDUENPTk8iLCBjb21wYW55KQ0KICAgIGNvbnRhaW5lci5zZXQoIkNQRElWSSIsIGluRElWSSkgDQogICAgY29udGFpbmVyLnNldCgiQ1BTVENPIiwgIkNSUzcwNiIpIA0KICAgIA0KICAgIGJvb2xlYW4gZm91bmQgPSBxdWVyeS5yZWFkKGNvbnRhaW5lcikNCiAgICANCiAgICBpZiAoIWZvdW5kKSAgew0KICAgICAgcmV0dXJuICIiICANCiAgICB9DQogICAgIA0KICAgIHJldHVybiBjb250YWluZXIuZ2V0U3RyaW5nKCJDUFBBUk0iKS50b1N0cmluZygpLnN1YnN0cmluZygwLCA3KQ0KICAgICAgDQogIH0NCiAgIA0KICAgDQogICANCiAgICAvKg0KICAgICBHZXQgdmFsdWUgZnJvbSBNSERJU0gNCiAgICovDQogIGJvb2xlYW4gY2hlY2tNSERJU0goaW50IGluSU5PVSwgaW50IGluQ09OTil7DQogICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiTUhESVNIIikuc2VsZWN0aW9uKCJPUVdITE8iKS5pbmRleCgiNDAiKS5idWlsZCgpICAgICAgICAgICAgIA0KICAgIA0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpDQogICAgY29udGFpbmVyLnNldCgiT1FDT05PIiwgY29tcGFueSkNCiAgICBjb250YWluZXIuc2V0KCJPUUlOT1UiLCBpbklOT1UpDQogICAgY29udGFpbmVyLnNldCgiT1FDT05OIiwgaW5DT05OKSANCiAgICBxdWVyeS5yZWFkQWxsKGNvbnRhaW5lciwgMywgMSwgcmVsZWFzZWRJdGVtUHJvY2Vzc29yTUhESVNIKSAgICAgDQogIH0NCiAgICANCiAgQ2xvc3VyZTw/PiByZWxlYXNlZEl0ZW1Qcm9jZXNzb3JNSERJU0ggPSB7IERCQ29udGFpbmVyIGNvbnRhaW5lciAgLT4gDQogICAgDQogICAgd2FyZWhvdXNlID0gY29udGFpbmVyLmdldFN0cmluZygiT1FXSExPIikgIA0KICAgIA0KICAgIHJldHVybiB0cnVlDQogIA0KICAgfSANCiAgDQogICANCiAgIC8qDQogICAgUmV0dXJuIHRydWUgaWYgdmFsaWQgZG9jdW1lbnQNCiAgKi8NCiAgYm9vbGVhbiBpc1ZhbGlkRG9jdW1lbnQoU3RyaW5nIGluRE9OUiwgU3RyaW5nIGluRE9WQSkgeyAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgIA0KICAgIGlmIChpbkRPTlIgPT0gIjkyMCIgJiYgaW5ET1ZBID09ICIwMSIpeyAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICByZXR1cm4gdHJ1ZSANCiAgICB9DQogICAgDQogICAgICByZXR1cm4gZmFsc2UgIA0KICB9IA0KICAgDQogIA0KICAvKg0KICAgIEdldCB0b2RheXMgZGF0ZQ0KICAqLw0KICBwdWJsaWMgdm9pZCByZXRyaWV2ZVRvZGF5c0RhdGUoKSB7DQogICAgTG9jYWxEYXRlVGltZSBkYXRlVGltZSA9IGphdmEudGltZS5Mb2NhbERhdGVUaW1lLm5vdygpDQogICAgZW50cnlEYXRlID0gZGF0ZVRpbWUuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkudG9JbnRlZ2VyKCkNCiAgICBlbnRyeVRpbWUgPSBkYXRlVGltZS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJISG1tc3MiKSkudG9JbnRlZ2VyKCkNCiAgfQ0KICANCiAgIA0KICAvLyBjaGVjayBpZiBmaWVsZCBmcm9tIE1JIGlzIG51bGwuIFJldHVybiB6ZXJvIGluIHRoYXQgY2FzZQ0KICBpbnQgcmVtb3ZlTnVsbGZyb21JbnRPYmplY3QoT2JqZWN0IGZpZWxkKXsNCiAgICAgaWYgKGZpZWxkID09IG51bGwpIHsgIA0KICAgICAgIHJldHVybiAwDQogICAgIH0gZWxzZSB7DQogICAgICAgcmV0dXJuIChpbnQpIGZpZWxkDQogICAgIH0NCiAgIH0NCiAgIA0KICANCiAgDQogICAvLyBjaGVjayBpZiBmaWVsZCBmcm9tIE1JIGlzIG51bGwuIFJldHVybiB6ZXJvIGluIHRoYXQgY2FzZQ0KICAgIFN0cmluZyByZW1vdmVOdWxsZnJvbVN0cmluZ09iamVjdChPYmplY3QgZmllbGQpew0KICAgICBpZiAoZmllbGQgPT0gbnVsbCkgeyAgDQogICAgICAgcmV0dXJuICIiDQogICAgIH0gZWxzZSB7DQogICAgICAgcmV0dXJuIGZpZWxkDQogICAgIH0NCiAgIH0NCiAgDQp9"}}}