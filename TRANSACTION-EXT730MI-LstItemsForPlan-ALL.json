{"programModules":{"EXT730MI":{"program":"EXT730MI","triggers":{},"transactions":{"LstItemsForPlan":{"sourceUuid":"ec5a2c89-3e7d-44a1-9e84-8e9d062a5571","name":"LstItemsForPlan","program":"EXT730MI","description":"List record from MITBAL and some more dB, calculation","active":true,"multi":true,"modified":1751285994120,"modifiedBy":"EXT_SK","outputFields":[{"name":"PRQT","description":"Proposed qty","length":17,"mandatory":false,"type":"N","refField":null},{"name":"WHLO","description":"Warehouse","length":3,"mandatory":false,"type":"A","refField":null},{"name":"ITNO","description":"Itemnumber","length":15,"mandatory":false,"type":"A","refField":null},{"name":"ITDS","description":"Item description","length":60,"mandatory":false,"type":"A","refField":null},{"name":"GRTI","description":"Group technology class","length":10,"mandatory":false,"type":"A","refField":null},{"name":"SUNO","description":"Supplier","length":10,"mandatory":false,"type":"A","refField":null},{"name":"BUYE","description":"Buyer","length":10,"mandatory":false,"type":"A","refField":null},{"name":"SITE","description":"Supplier item number","length":30,"mandatory":false,"type":"A","refField":null},{"name":"SUNM","description":"Supplier name","length":36,"mandatory":false,"type":"A","refField":null},{"name":"STAT","description":"Status","length":2,"mandatory":false,"type":"A","refField":null},{"name":"UCOS","description":"Standard cost","length":17,"mandatory":false,"type":"N","refField":null},{"name":"SSQT","description":"Safety stock","length":17,"mandatory":false,"type":"N","refField":null},{"name":"EOQT","description":"Order qty","length":17,"mandatory":false,"type":"N","refField":null},{"name":"REQT","description":"Reserved qty","length":17,"mandatory":false,"type":"N","refField":null},{"name":"STQT","description":"Qty in stock","length":17,"mandatory":false,"type":"N","refField":null},{"name":"RSTQ","description":"Qty in stock REN","length":17,"mandatory":false,"type":"N","refField":null},{"name":"RALQ","description":"Allocated qty REN","length":17,"mandatory":false,"type":"N","refField":null},{"name":"ORQA","description":"Purchase qty","length":17,"mandatory":false,"type":"N","refField":null},{"name":"RVQT","description":"Received qty","length":17,"mandatory":false,"type":"N","refField":null},{"name":"RORQ","description":"Qty on order REN","length":17,"mandatory":false,"type":"N","refField":null},{"name":"DEQT","description":"Desired qty","length":17,"mandatory":false,"type":"N","refField":null},{"name":"ALRE","description":"Allocatable REN","length":17,"mandatory":false,"type":"N","refField":null},{"name":"PORE","description":"Remaining purchase","length":17,"mandatory":false,"type":"N","refField":null},{"name":"VARE","description":"Value REN","length":17,"mandatory":false,"type":"N","refField":null},{"name":"RITN","description":"Item number REN","length":15,"mandatory":false,"type":"A","refField":null},{"name":"ALR1","description":"Allocatable","length":17,"mandatory":false,"type":"N","refField":null},{"name":"PPQT","description":"Planned qty","length":17,"mandatory":false,"type":"N","refField":null},{"name":"PQTY","description":"Proposed qty type","length":1,"mandatory":false,"type":"A","refField":null},{"name":"PRDT","description":"Proposed date","length":8,"mandatory":false,"type":"N","refField":null}],"inputFields":[{"name":"WHLO","description":"Warehouse","length":3,"mandatory":true,"type":"A","refField":null},{"name":"FBUY","description":"From buyer","length":10,"mandatory":false,"type":"A","refField":null},{"name":"TBUY","description":"To buyer","length":10,"mandatory":false,"type":"A","refField":null},{"name":"FSTS","description":"From status (MITBAL)","length":2,"mandatory":false,"type":"A","refField":null},{"name":"TSTS","description":"To status (MITBAL)","length":2,"mandatory":false,"type":"A","refField":null},{"name":"FITN","description":"From itemnumber","length":15,"mandatory":false,"type":"A","refField":null},{"name":"TITN","description":"To itemnumber","length":15,"mandatory":false,"type":"A","refField":null}],"utilities":[],"market":"ALL"}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"ec5a2c89-3e7d-44a1-9e84-8e9d062a5571":{"uuid":"ec5a2c89-3e7d-44a1-9e84-8e9d062a5571","updated":1752565081093,"updatedBy":"EXT_SK","created":1750232319738,"createdBy":"EXT_SK","apiVersion":"0.21","beVersion":"16.0.0.20250521011729.6","language":"GROOVY","codeHash":"5DCA13C766B578DF283A2ECDF62A7BEAB843AFDCAD1545C800CD7451EB134563","code":"LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKIEV4dGVuc2lvbiBOYW1lOiBFWFQ3MzBNSS9Mc3RJdGVtc0ZvclBsYW4KIFR5cGU6IEV4dGVuZE0zVHJhbnNhY3Rpb24KIFNjcmlwdCBBdXRob3I6IFN1c2FubmEgS2VsbGFuZGVyIC0gRWx2ZW5pdGUKIERhdGU6IDIwMjQtMTAtMTQKIERlc2NyaXB0aW9uOiBMaXN0IHJlY29yZCBmcm9tIE1JVEJBTCwgYWRkZWQgZmllbGRzIGFyZSBNSVRNQVMsIE1JVFZFTiwgQ0lETUFTLCBNQ0hFQUQgYW5kIGNhbGN1bGF0ZWQgdmFsdWVzCiAKCiBSZXZpc2lvbiBIaXN0b3J5OgogTmFtZSAgICAgICAgICAgICAgICAgICAgRGF0ZSAgICAgICAgICAgICBWZXJzaW9uICAgICAgICAgIERlc2NyaXB0aW9uIG9mIENoYW5nZXMKIFN1c2FubmEgS2VsbGFuZGVyICAgICAgIDIwMjQtMTAtMTQgICAgICAgMS4wICAgICAgICAgICAgICBTUDAwMDcgLSBMaXN0IHJlY29yZCBmcm9tIE1JVEJBTCwgYWRkZWQgZmllbGRzIGFyZSBNSVRNQVMsIE1JVFZFTiwgQ0lETUFTLCBNQ0hFQUQgYW5kIGNhbGN1bGF0ZWQgdmFsdWVzCioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lCmltcG9ydCBqYXZhLnRpbWUuZm9ybWF0LkRhdGVUaW1lRm9ybWF0dGVyCnB1YmxpYyBjbGFzcyBMc3RJdGVtc0ZvclBsYW4gZXh0ZW5kcyBFeHRlbmRNM1RyYW5zYWN0aW9uIHsgCiAgcHJpdmF0ZSBmaW5hbCBNSUFQSSBtaQoJcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZQoJcHJpdmF0ZSBmaW5hbCBMb2dnZXJBUEkgbG9nZ2VyCglwcml2YXRlIGZpbmFsIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyIAoJcHJpdmF0ZSBmaW5hbCBQcm9ncmFtQVBJIHByb2dyYW0KCQoJaW50IGNvbXBhbnkgPSAwIAoJU3RyaW5nIHdhcmVob3VzZSA9ICIiICAKCVN0cmluZyBmcm9tQnV5ZXIgPSAiIgoJU3RyaW5nIHRvQnV5ZXIgPSAiIgoJU3RyaW5nIGZyb21TdGF0dXMgPSAiIgoJU3RyaW5nIHRvU3RhdHVzID0gIiIKCVN0cmluZyBmcm9tSXRlbU51bWJlciA9ICIiCglTdHJpbmcgdG9JdGVtTnVtYmVyID0gIiIgCglTdHJpbmcgZml4V2FyZWhvdXNlID0gIlJFTiIgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlZCB0byBnZXQgY29ycmVzcG9uZGluZyB2YWx1ZSB0byBvcmlnaW4gTUlUQkFMIHJlY29yZAogIFN0cmluZyBmcm9tRml4U3VwcGxpZXJJdGVtTnVtYmVyID0gIlJFTk9WRVJJTkciCiAgU3RyaW5nIHRvRml4U3VwcGxpZXJJdGVtTnVtYmVyID0gIlJFTk9WRVJJTkfDlsOWw5bDlsOWw5bDlsOWw5bDliIKCVN0cmluZyBmaXhSZWZlcmVuY2UgPSAiUkVOIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1c2VkIHRvIGdldCBNUE9QTFAgcmVjb3JkCiAgU3RyaW5nIGl0ZW1EZXNjcmlwdGlvbiA9ICIiCiAgU3RyaW5nIGdyb3VwVGVjaG5vbG9neUNsYXNzID0gIiIgIAogIGRvdWJsZSBzdG9ja0JhbGFuY2UwMiA9IDAKICBkb3VibGUgYWxsb2NhdGVkUXR5MDIgPSAwICAKICBkb3VibGUgc3RvY2tCYWxhbmNlID0gMCAKICBkb3VibGUgYWNjT3JkZXJRdHlNTU9IRUQgPSAwCiAgZG91YmxlIGFjY09yZGVyUXR5TVBMSU5FID0gMAogIGRvdWJsZSBhY2NQbGFubmVkUXR5TVBPUExQID0gMAogIGRvdWJsZSBhY2NSZWNpZXZlZFF0eSA9IDAKICBTdHJpbmcgbG9jYXRpb24gPSAiIiAKICBpbnQgZGVjaW1hbCA9IDAgCiAgZG91YmxlIGNvc3QgPSAwCglFeHByZXNzaW9uRmFjdG9yeSBleHAKCWJvb2xlYW4gIG5vUmVjb3JkRm91bmQgPSBmYWxzZSAKCVN0cmluZyBvcmRlclR5cGUgPSAiIiAKCWludCBsb2dTdWZmaXggPSAwIAoJU3RyaW5nIHV1SWQgPSAiIgoJU3RyaW5nIHN1cHBsaWVySXRlbSA9ICIiCgkKCWludCBlbnRyeURhdGUgPSAwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlZCBmb3IgZ2V0dGluZyAibmV4dCBGcmlkYXkiCglpbnQgdGhpc0RheSA9IDAKICBTdHJpbmcgeWVhcldlZWtEYXkgPSAgIiIKICBTdHJpbmcgZGF5Rml2ZSA9ICAnICcKICBTdHJpbmcgeWVhcldlZWsgPSAgIiIKICBTdHJpbmcgbmV3WWVhcldlZWtEYXkgPSAiIgogIGludCBuZXh0RnJpZGF5ID0gMCAKICBpbnQgZGF5TnVtYmVyID0gMCAKICBpbnQgZW50cnlUaW1lID0gMCAgICAgCiAgCgkKCXB1YmxpYyBMc3RJdGVtc0ZvclBsYW4oTUlBUEkgbWksIERhdGFiYXNlQVBJIGRhdGFiYXNlLFByb2dyYW1BUEkgcHJvZ3JhbSwgTG9nZ2VyQVBJIGxvZ2dlcikgewogICAgIHRoaXMubWkgPSBtaQogICAgIHRoaXMuZGF0YWJhc2UgPSBkYXRhYmFzZQogICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyCiAgICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbQogIH0KCgkKICAvKgogICAgbWFpbiBtZXRob2QKICAqLwogIHB1YmxpYyB2b2lkIG1haW4oKSB7ICAKICAgICBpZihyZXRyaWV2ZUlucHV0UGFyYW1ldGVycygpKSB7IAogICAgICAgbGlzdE1JVEJBTCgpCiAgICAgICBpZighbm9SZWNvcmRGb3VuZCl7IAogICAgICAgICBkZWxldGVFWFQwMDcoKQogICAgICAgICBtaS5lcnJvcigiTm8gcmVjb3JkIGZvdW5kIikKICAgICAgICAgcmV0dXJuCiAgICAgICB9ZWxzZXsgCiAgICAgICAgIHNlbmRPdXRwdXQoKSAgCiAgICAgICAgIGRlbGV0ZUVYVDAwNygpCiAgICAgICB9IAogICAgIH0gCiAgfSAKICAKICAKICAgCiAgCiAvKgogICAgIGxpc3RNSVRCQUwgLSBMaXN0IE1JVEJBTAogICovCiAgcHVibGljIHZvaWQgbGlzdE1JVEJBTCgpeyAKICAgICBjcnRFeHByZXNzaW9uKCkKICAgICBEQkFjdGlvbiBkYmFNSVRCQUwgPSBkYXRhYmFzZS50YWJsZSgiTUlUQkFMIikubWF0Y2hpbmcoZXhwKS5zZWxlY3Rpb24oIk1CRkFDSSIsICJNQklUTk8iLCAiTUJTVU5PIiwgIk1CQlVZRSIsICJNQlNUQVQiLCAiTUJTU1FUIiwgIk1CRU9RVCIsICJNQlJFUVQiLCAiTUJTVFFUIiwgIk1CQUxRVCIpLmluZGV4KCIwMCIpLmJ1aWxkKCkgIAogICAgIERCQ29udGFpbmVyIGNvbk1JVEJBTCA9IGRiYU1JVEJBTC5nZXRDb250YWluZXIoKQogICAgIGNvbk1JVEJBTC5zZXQoIk1CQ09OTyIsIGNvbXBhbnkpIAogICAgIGNvbk1JVEJBTC5zZXQoIk1CV0hMTyIsIHdhcmVob3VzZSkgICAKICAgICBkYmFNSVRCQUwucmVhZEFsbChjb25NSVRCQUwsIDIsIDEwMDAwLCByZXN1bHRIYW5kbGVyRm9yTUlUQkFMKSAgCiAgfSAKICAKICAgIAogIENsb3N1cmU8Pz4gcmVzdWx0SGFuZGxlckZvck1JVEJBTCA9IHsgREJDb250YWluZXIgY29uTUlUQkFMIC0+ICAgIAogICAgIHdyaXRlRVhUMDA3KGNvbk1JVEJBTCkKICAgICBub1JlY29yZEZvdW5kID0gdHJ1ZSAKICB9ICAKICAKICAKICAvKgogICAgIENyZWF0ZSBleHByZXNzaW9uIAogICovCiAgcHVibGljIHZvaWQgY3J0RXhwcmVzc2lvbigpeyAKICAgICBleHAgPSBkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiTUlUQkFMIikgICAKICAgICBpZihmcm9tQnV5ZXIgIT0gIiIpeyAKICAgICAgIGV4cCA9IGV4cC5nZSgiTUJCVVlFIiwgZnJvbUJ1eWVyKSAgICAgICAgICAgICAgICAgICAvLyBuZWVkIHRvIGZvcmNlIGEgZmlyc3Qgc2VsZWN0aW9uCiAgICAgICBleHAgPSBleHAuYW5kKGV4cC5sZSgiTUJCVVlFIiwgdG9CdXllcikpCiAgICAgfWVsc2V7CiAgICAgICBleHAgPSBleHAuZ2UoIk1CQlVZRSIsICIiKQogICAgIH0gCiAgICAgaWYoZnJvbVN0YXR1cyAhPSAiIil7CiAgICAgICBleHAgPSBleHAuYW5kKGV4cC5nZSgiTUJTVEFUIiwgZnJvbVN0YXR1cykpCiAgICAgICBleHAgPSBleHAuYW5kKGV4cC5sZSgiTUJTVEFUIiwgdG9TdGF0dXMpKQogICAgIH0gCiAgICAgaWYoZnJvbUl0ZW1OdW1iZXIgIT0gIiIpewogICAgICAgZXhwID0gZXhwLmFuZChleHAuZ2UoIk1CSVROTyIsIGZyb21JdGVtTnVtYmVyKSkKICAgICAgIGV4cCA9IGV4cC5hbmQoZXhwLmxlKCJNQklUTk8iLCB0b0l0ZW1OdW1iZXIpKQogICAgIH0gCiAgfQogCiAgIAogIC8qCiAgICB3cml0ZUVYVDAwNyAtIHdyaXRlIHRvIHdvcmtmaWxlLCBmb3Igc29ydGluZyBvcmRlcgogICovICAKICBwdWJsaWMgdm9pZCB3cml0ZUVYVDAwNyhEQkNvbnRhaW5lciBjb25NSVRCQUwpIHsgICAKICAgIAogICAgIGNsZWFyVmFsdWUoKQogICAgIGdldE1JVE1BUyhjb25NSVRCQUwuZ2V0U3RyaW5nKCJNQklUTk8iKSkKICAgIAogICAgIGxvZ1N1ZmZpeCsrCgkJCgkJIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIkVYVDAwNyIpLmluZGV4KCIwMCIpLmJ1aWxkKCkKCQkgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkgCgkgICBjb250YWluZXIuc2V0KCJFWENPTk8iLCBjb21wYW55KSAKCSAgIGNvbnRhaW5lci5zZXQoIkVYU0VRTiIsIGxvZ1N1ZmZpeCkgCgkgICBjb250YWluZXIuc2V0KCJFWFVVSUQiLCB1dUlkKSAKICAgICBjb250YWluZXIuc2V0KCJFWFdITE8iLCBjb25NSVRCQUwuZ2V0U3RyaW5nKCJNQldITE8iKSkKICAgICBjb250YWluZXIuc2V0KCJFWElUTk8iLCBjb25NSVRCQUwuZ2V0U3RyaW5nKCJNQklUTk8iKSkKICAgICBjb250YWluZXIuc2V0KCJFWElURFMiLCBpdGVtRGVzY3JpcHRpb24pCiAgICAgY29udGFpbmVyLnNldCgiRVhHUlRJIiwgZ3JvdXBUZWNobm9sb2d5Q2xhc3MpCiAgICAgY29udGFpbmVyLnNldCgiRVhTVU5PIiwgY29uTUlUQkFMLmdldFN0cmluZygiTUJTVU5PIikpCiAgICAgY29udGFpbmVyLnNldCgiRVhCVVlFIiwgY29uTUlUQkFMLmdldFN0cmluZygiTUJCVVlFIikpCiAgICAgZ2V0TUlUVkVOKGNvbk1JVEJBTC5nZXRTdHJpbmcoIk1CU1VOTyIpLnRvU3RyaW5nKCksIGNvbk1JVEJBTC5nZXRTdHJpbmcoIk1CSVROTyIpLnRvU3RyaW5nKCkpCiAgICAgY29udGFpbmVyLnNldCgiRVhTSVRFIiwgc3VwcGxpZXJJdGVtKQogICAgIGNvbnRhaW5lci5zZXQoIkVYU1VOTSIsIGdldENJRE1BUyhjb25NSVRCQUwuZ2V0U3RyaW5nKCJNQlNVTk8iKSkpCiAgICAgY29udGFpbmVyLnNldCgiRVhTVEFUIiwgY29uTUlUQkFMLmdldFN0cmluZygiTUJTVEFUIikpCiAgICAgY29udGFpbmVyLnNldCgiRVhBTFIxIiwgKChkb3VibGUpY29uTUlUQkFMLmdldERvdWJsZSgiTUJTVFFUIikgLSAoZG91YmxlKWNvbk1JVEJBTC5nZXREb3VibGUoIk1CUkVRVCIpKSkKICAgICBnZXRNQ0hFQUQoY29uTUlUQkFMLmdldFN0cmluZygiTUJGQUNJIikudG9TdHJpbmcoKSwgY29uTUlUQkFMLmdldFN0cmluZygiTUJJVE5PIikudG9TdHJpbmcoKSkKICAgICBjb250YWluZXIuc2V0KCJFWFVDT1MiLCBjb3N0KQogICAgIGNvbnRhaW5lci5zZXQoIkVYU1NRVCIsIGNvbk1JVEJBTC5nZXREb3VibGUoIk1CU1NRVCIpKSAKICAgICBjb250YWluZXIuc2V0KCJFWEVPUVQiLCBjb25NSVRCQUwuZ2V0RG91YmxlKCJNQkVPUVQiKSkgCiAgICAgY29udGFpbmVyLnNldCgiRVhSRVFUIiwgY29uTUlUQkFMLmdldERvdWJsZSgiTUJSRVFUIikpIAogICAgIGNvbnRhaW5lci5zZXQoIkVYU1RRVCIsIGNvbk1JVEJBTC5nZXREb3VibGUoIk1CU1RRVCIpKSAKICAgICBnZXRNSVRCQUwwMihjb25NSVRCQUwuZ2V0U3RyaW5nKCJNQklUTk8iKS50b1N0cmluZygpKQogICAgIGNvbnRhaW5lci5zZXQoIkVYUlNUUSIsIHN0b2NrQmFsYW5jZTAyKSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFF0eSBpbiBzdG9jayBSRU4gCiAgICAgY29udGFpbmVyLnNldCgiRVhSQUxRIiwgYWxsb2NhdGVkUXR5MDIpICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWxsb2NhdGVkIHF0eSBSRU4gCiAgICAgY29udGFpbmVyLnNldCgiRVhSSVROIiwgY29uTUlUQkFMLmdldFN0cmluZygiTUJJVE5PIikuY29uY2F0KCItUiIpKSAgICAgICAKICAgICBnZXRPcmRlclR5cGVDVUdFWDMoY29uTUlUQkFMLmdldFN0cmluZygiTUJGQUNJIikudG9TdHJpbmcoKSkgCiAgICAgc3VtbWFyaXplRnJvbU1QTElORShvcmRlclR5cGUsIGNvbk1JVEJBTC5nZXRTdHJpbmcoIk1CV0hMTyIpLnRvU3RyaW5nKCksIGNvbk1JVEJBTC5nZXRTdHJpbmcoIk1CSVROTyIpLnRvU3RyaW5nKCkpICAgICAgIC8vIGFjY3VtdWxhdGUgZnJvbSBNUExJTkUKICAgICBjb250YWluZXIuc2V0KCJFWE9SUUEiLCBhY2NPcmRlclF0eU1QTElORSkgICAgIAogICAgIGNvbnRhaW5lci5zZXQoIkVYUlZRVCIsIGFjY1JlY2lldmVkUXR5KSAgCiAgICAgc3VtbWFyaXplRnJvbU1NT0hFRChjb25NSVRCQUwuZ2V0U3RyaW5nKCJNQldITE8iKS50b1N0cmluZygpLCBjb25NSVRCQUwuZ2V0U3RyaW5nKCJNQklUTk8iKS50b1N0cmluZygpKSAgCiAgICAgY29udGFpbmVyLnNldCgiRVhST1JRIiwgYWNjT3JkZXJRdHlNTU9IRUQpIAogICAgIGRvdWJsZSBkZXNpcmVkUXR5ICA9ICgoKGRvdWJsZSljb25NSVRCQUwuZ2V0RG91YmxlKCJNQlNTUVQiKSArIChkb3VibGUpY29uTUlUQkFMLmdldERvdWJsZSgiTUJFT1FUIikgKyAoZG91YmxlKWNvbk1JVEJBTC5nZXREb3VibGUoIk1CUkVRVCIpKSAtICgoZG91YmxlKWNvbk1JVEJBTC5nZXREb3VibGUoIk1CU1RRVCIpKSkKICAgICBkb3VibGUgYWxsb2NhdGFibGVSZW4gPSBzdG9ja0JhbGFuY2UwMiAtIGFsbG9jYXRlZFF0eTAyCiAgICAgY29udGFpbmVyLnNldCgiRVhERVFUIiwgZGVzaXJlZFF0eSkgICAgIAogICAgIGNvbnRhaW5lci5zZXQoIkVYQUxSRSIsIGFsbG9jYXRhYmxlUmVuKQogICAgIGlmKGFsbG9jYXRhYmxlUmVuIDw9IGRlc2lyZWRRdHkgLSBhY2NPcmRlclF0eU1NT0hFRCl7CiAgICAgICBjb250YWluZXIuc2V0KCJFWFBSUVQiLCBhbGxvY2F0YWJsZVJlbikKICAgICB9ZWxzZXsgIAogICAgICAgY29udGFpbmVyLnNldCgiRVhQUlFUIiwgZGVzaXJlZFF0eSAtIGFjY09yZGVyUXR5TU1PSEVEKQogICAgIH0gCiAgICAgaWYoKChkb3VibGUpY29uTUlUQkFMLmdldERvdWJsZSgiTUJTVFFUIikgLSAoZG91YmxlKWNvbk1JVEJBTC5nZXREb3VibGUoIk1CUkVRVCIpKSA8IChkb3VibGUpY29uTUlUQkFMLmdldERvdWJsZSgiTUJTU1FUIikpeyAgICAgICAgICAgLy8gY29tcGFyZSB3aXRoIEFMUjEgYWJvdmUgICAgICAKICAgICAgIGNvbnRhaW5lci5zZXRDaGFyKCJFWFBRVFkiLCAnMicpIAogICAgIH1lbHNlIGlmKCgoZG91YmxlKWNvbk1JVEJBTC5nZXREb3VibGUoIk1CU1RRVCIpIC0gKGRvdWJsZSljb25NSVRCQUwuZ2V0RG91YmxlKCJNQlJFUVQiKSkgPT0gKGRvdWJsZSljb25NSVRCQUwuZ2V0RG91YmxlKCJNQlNTUVQiKSl7ICAgIC8vIGNvbXBhcmUgd2l0aCBBTFIxIGFib3ZlICAgICAgCiAgICAgICBjb250YWluZXIuc2V0Q2hhcigiRVhQUVRZIiwgJzEnKSAKICAgICB9ZWxzZXsKICAgICAgIGNvbnRhaW5lci5zZXRDaGFyKCJFWFBRVFkiLCAnMCcpIAogICAgIH0KICAgICBjb250YWluZXIuc2V0KCJFWFBPUkUiLCAoYWNjT3JkZXJRdHlNUExJTkUgLSBhY2NSZWNpZXZlZFF0eSkpCiAgICAgY29udGFpbmVyLnNldCgiRVhWQVJFIiwgKGFsbG9jYXRhYmxlUmVuICogZ2V0TUlURkFDKGNvbk1JVEJBTC5nZXRTdHJpbmcoIk1CRkFDSSIpLnRvU3RyaW5nKCksIGNvbk1JVEJBTC5nZXRTdHJpbmcoIk1CSVROTyIpLnRvU3RyaW5nKCkpKSkgICAKICAgICBhY2NQbGFubmVkUXR5TVBPUExQID0gMAogICAgIHN1bW1hcml6ZUZyb21NUE9QTFAoY29uTUlUQkFMLmdldFN0cmluZygiTUJXSExPIikudG9TdHJpbmcoKSwgY29uTUlUQkFMLmdldFN0cmluZygiTUJJVE5PIikudG9TdHJpbmcoKSkgCiAgICAgY29udGFpbmVyLnNldCgiRVhQUFFUIiwgYWNjUGxhbm5lZFF0eU1QT1BMUCkgIAogICAgCiAgICAgY29udGFpbmVyLnNldCgiRVhSR0RUIiwgZW50cnlEYXRlKSAKICAgICBjb250YWluZXIuc2V0KCJFWFJHVE0iLCBlbnRyeVRpbWUpIAogICAgIGNvbnRhaW5lci5zZXQoIkVYTE1EVCIsIGVudHJ5RGF0ZSkKICAgICBjb250YWluZXIuc2V0KCJFWENISUQiLCBwcm9ncmFtLmdldFVzZXIoKSkKICAgICBjb250YWluZXIuc2V0KCJFWENITk8iLCAxKQogICAgIHF1ZXJ5Lmluc2VydChjb250YWluZXIsIHJlY29yZEV4aXN0cykgCiAgICAgIAogfSAgCiAKICAKICBDbG9zdXJlIHJlY29yZEV4aXN0cyA9IHsKICAgLy8gTm8gaGFuZGxlIG5lZWRlZCBpZiByZWNvcmQgYWxyZWFkeSBleGlzdCAKICB9CiAgICAgCiAgCiAgLyoKICAgIHNlbmRPdXRwdXQgLSBzZW5kIG91dCBpbmZvcm1hdGlvbgogICovICAKICBwdWJsaWMgdm9pZCBzZW5kT3V0cHV0KCkgeyAgIAogICAgIGV4cCA9IGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJFWFQwMDciKSAgICAKICAgICBleHAgPSBleHAuZ3QoIkVYREVRVCIsICIwIikgICAgICAgCiAgICAgREJBY3Rpb24gZGJhRVhUMDA3ID0gZGF0YWJhc2UudGFibGUoIkVYVDAwNyIpLnNlbGVjdEFsbEZpZWxkcygpLnJldmVyc2UoKS5tYXRjaGluZyhleHApLmluZGV4KCIxMCIpLmJ1aWxkKCkgIAogICAgIERCQ29udGFpbmVyIGNvbkVYVDAwNyA9IGRiYUVYVDAwNy5nZXRDb250YWluZXIoKQogICAgIGNvbkVYVDAwNy5zZXQoIkVYQ09OTyIsIGNvbXBhbnkpIAogICAgIGNvbkVYVDAwNy5zZXQoIkVYVVVJRCIsIHV1SWQpICAgCiAgICAgZGJhRVhUMDA3LnJlYWRBbGwoY29uRVhUMDA3LCAyLCAxMDAwMCwgcmVzdWx0SGFuZGxlckZvckVYVDAwNykgIAogIH0KICAKICBDbG9zdXJlPD8+IHJlc3VsdEhhbmRsZXJGb3JFWFQwMDcgPSB7IERCQ29udGFpbmVyIGNvbkVYVDAwNyAtPiAgIAogICAgIG1pLm91dERhdGEucHV0KCJXSExPIiwgY29uRVhUMDA3LmdldFN0cmluZygiRVhXSExPIikpICAKICAgICBtaS5vdXREYXRhLnB1dCgiSVROTyIsIGNvbkVYVDAwNy5nZXRTdHJpbmcoIkVYSVROTyIpKQogICAgIG1pLm91dERhdGEucHV0KCJJVERTIiwgY29uRVhUMDA3LmdldFN0cmluZygiRVhJVERTIikpCiAgICAgbWkub3V0RGF0YS5wdXQoIkdSVEkiLCBjb25FWFQwMDcuZ2V0U3RyaW5nKCJFWEdSVEkiKSkKICAgICBtaS5vdXREYXRhLnB1dCgiU1VOTyIsIGNvbkVYVDAwNy5nZXRTdHJpbmcoIkVYU1VOTyIpKQogICAgIG1pLm91dERhdGEucHV0KCJCVVlFIiwgY29uRVhUMDA3LmdldFN0cmluZygiRVhCVVlFIikpCiAgICAgbWkub3V0RGF0YS5wdXQoIlNJVEUiLCBjb25FWFQwMDcuZ2V0U3RyaW5nKCJFWFNJVEUiKSkKICAgICBtaS5vdXREYXRhLnB1dCgiU1VOTSIsIGNvbkVYVDAwNy5nZXRTdHJpbmcoIkVYU1VOTSIpKQogICAgIG1pLm91dERhdGEucHV0KCJTVEFUIiwgY29uRVhUMDA3LmdldFN0cmluZygiRVhTVEFUIikpCiAgICAgbWkub3V0RGF0YS5wdXQoIkFMUjEiLCBjb25FWFQwMDcuZ2V0RG91YmxlKCJFWEFMUjEiKS50b1N0cmluZygpKQogICAgIG1pLm91dERhdGEucHV0KCJVQ09TIiwgY29uRVhUMDA3LmdldERvdWJsZSgiRVhVQ09TIikudG9TdHJpbmcoKSkKICAgICBtaS5vdXREYXRhLnB1dCgiU1NRVCIsIGNvbkVYVDAwNy5nZXREb3VibGUoIkVYU1NRVCIpLnRvU3RyaW5nKCkpIAogICAgIG1pLm91dERhdGEucHV0KCJFT1FUIiwgY29uRVhUMDA3LmdldERvdWJsZSgiRVhFT1FUIikudG9TdHJpbmcoKSkKICAgICBtaS5vdXREYXRhLnB1dCgiUkVRVCIsIGNvbkVYVDAwNy5nZXREb3VibGUoIkVYUkVRVCIpLnRvU3RyaW5nKCkpCiAgICAgbWkub3V0RGF0YS5wdXQoIlNUUVQiLCBjb25FWFQwMDcuZ2V0RG91YmxlKCJFWFNUUVQiKS50b1N0cmluZygpKSAgCiAgICAgbWkub3V0RGF0YS5wdXQoIlJTVFEiLCBjb25FWFQwMDcuZ2V0RG91YmxlKCJFWFJTVFEiKS50b1N0cmluZygpKQogICAgIG1pLm91dERhdGEucHV0KCJSQUxRIiwgY29uRVhUMDA3LmdldERvdWJsZSgiRVhSQUxRIikudG9TdHJpbmcoKSkKICAgICBtaS5vdXREYXRhLnB1dCgiUklUTiIsIGNvbkVYVDAwNy5nZXRTdHJpbmcoIkVYUklUTiIpKQogICAgIG1pLm91dERhdGEucHV0KCJPUlFBIiwgY29uRVhUMDA3LmdldERvdWJsZSgiRVhPUlFBIikudG9TdHJpbmcoKSkgIAogICAgIG1pLm91dERhdGEucHV0KCJSVlFUIiwgY29uRVhUMDA3LmdldERvdWJsZSgiRVhSVlFUIikudG9TdHJpbmcoKSkgCiAgICAgbWkub3V0RGF0YS5wdXQoIlJPUlEiLCBjb25FWFQwMDcuZ2V0RG91YmxlKCJFWFJPUlEiKS50b1N0cmluZygpKQogICAgIG1pLm91dERhdGEucHV0KCJERVFUIiwgY29uRVhUMDA3LmdldERvdWJsZSgiRVhERVFUIikudG9TdHJpbmcoKSkgICAKICAgICBtaS5vdXREYXRhLnB1dCgiQUxSRSIsIGNvbkVYVDAwNy5nZXREb3VibGUoIkVYQUxSRSIpLnRvU3RyaW5nKCkpICAKICAgICBtaS5vdXREYXRhLnB1dCgiUFJRVCIsIGNvbkVYVDAwNy5nZXREb3VibGUoIkVYUFJRVCIpLnRvU3RyaW5nKCkpICAKICAgICBtaS5vdXREYXRhLnB1dCgiUE9SRSIsIGNvbkVYVDAwNy5nZXREb3VibGUoIkVYUE9SRSIpLnRvU3RyaW5nKCkpICAKICAgICBtaS5vdXREYXRhLnB1dCgiVkFSRSIsIGNvbkVYVDAwNy5nZXREb3VibGUoIkVYVkFSRSIpLnRvU3RyaW5nKCkpICAgCiAgICAgbWkub3V0RGF0YS5wdXQoIlBQUVQiLCBjb25FWFQwMDcuZ2V0RG91YmxlKCJFWFBQUVQiKS50b1N0cmluZygpKSAgIAogICAgIG1pLm91dERhdGEucHV0KCJQUVRZIiwgY29uRVhUMDA3LmdldCgiRVhQUVRZIikudG9TdHJpbmcoKSkgCiAgICAgbWkub3V0RGF0YS5wdXQoIlBSRFQiLCBnZXROZXh0RnJpZGF5VmlhQWN0dWFsRGF0ZSgpLnRvU3RyaW5nKCkpIAogICAgIG1pLndyaXRlKCkgIAogICAgICAKIH0gIAogCiAgCiAgLyoKICAgICBEZWxldGUgcmVjb3JkIGluIEVYVDAwNwoJKi8KICBwdWJsaWMgdm9pZCBkZWxldGVFWFQwMDcoKXsgCiAgICAgCiAgICAgREJBY3Rpb24gZGJhRVhUMDA3ID0gZGF0YWJhc2UudGFibGUoIkVYVDAwNyIpLmluZGV4KCIyMCIpLmJ1aWxkKCkgIAogICAgIERCQ29udGFpbmVyIGNvbkVYVDAwNyA9IGRiYUVYVDAwNy5nZXRDb250YWluZXIoKSAgIAogICAgIGNvbkVYVDAwNy5zZXQoIkVYQ09OTyIsIGNvbXBhbnkpIAogICAgIGNvbkVYVDAwNy5zZXQoIkVYVVVJRCIsIHV1SWQpICAKICAgICAgCiAgICAgZGJhRVhUMDA3LnJlYWRBbGxMb2NrKGNvbkVYVDAwNywgMiwgZGVsZXRlckNhbGxiYWNrKSAKICB9CgoKICBDbG9zdXJlPD8+IGRlbGV0ZXJDYWxsYmFjayA9IHsgTG9ja2VkUmVzdWx0IGxvY2tlZFJlc3VsdCAtPgoKICAgICBsb2NrZWRSZXN1bHQuZGVsZXRlKCkKICB9CiAgCiAgIAogIC8qCiAgICAgZ2V0TmV4dEZyaWRheVZpYUFjdHVhbERhdGUgLSBmaW5kIG5leHQgZmlyZGF5IHZpYSB0b2RheXMgZGF0ZQoJKi8KICBpbnQgZ2V0TmV4dEZyaWRheVZpYUFjdHVhbERhdGUoKXsgIAogICAgIHRoaXNEYXkgPSBnZXRDU1lDQUwoZW50cnlEYXRlKQogICAgIHllYXJXZWVrRGF5ID0gIHRoaXNEYXkudG9TdHJpbmcoKQogICAgIGRheUZpdmUgPSB5ZWFyV2Vla0RheS5zdWJzdHJpbmcoNCkKICAgICB5ZWFyV2VlayA9IHllYXJXZWVrRGF5LnN1YnN0cmluZygwLCA0KSAgICAKICAgICAKICAgICBpZihkYXlGaXZlIDwgJzUnKXsKICAgICAgIG5ld1llYXJXZWVrRGF5ID0geWVhcldlZWsuY29uY2F0KCc1JykgICAKICAgICAgIGdldENTWUNBTE5ld0RhdGVGcm9tV2VlaygoaW50KW5ld1llYXJXZWVrRGF5LnRvSW50ZWdlcigpKQogICAgICAgcmV0dXJuIG5leHRGcmlkYXkKICAgICB9ZWxzZSBpZihkYXlGaXZlID09ICc1Jyl7ICAKICAgICAgICBnZXRDU1lDQUxOZXdEYXRlRnJvbURheShkYXlOdW1iZXIgKyA3KQogICAgICAgIHJldHVybiBuZXh0RnJpZGF5IAogICAgIH1lbHNlIGlmKGRheUZpdmUgPT0gJzYnKXsgCiAgICAgICAgZ2V0Q1NZQ0FMTmV3RGF0ZUZyb21EYXkoZGF5TnVtYmVyICsgNikKICAgICAgICByZXR1cm4gbmV4dEZyaWRheSAKICAgICB9ZWxzZSBpZihkYXlGaXZlID09ICc3Jyl7IAogICAgICAgIGdldENTWUNBTE5ld0RhdGVGcm9tRGF5KGRheU51bWJlciArIDUpCiAgICAgICAgcmV0dXJuIG5leHRGcmlkYXkgCiAgICAgfSAKICAgICAKICAgICByZXR1cm4gMAogIH0KIAogCiAgIC8qCiAgICByZXRyaWV2ZSBhbmQgY2hlY2sgaW5wdXQgcGFyYW1ldGVycwoJKi8KCWJvb2xlYW4gcmV0cmlldmVJbnB1dFBhcmFtZXRlcnMoKSB7CgkgIAoJCSBjb21wYW55ID0gKEludGVnZXIpcHJvZ3JhbS5nZXRMREFaRCgpLkNPTk8gICAKCQkgd2FyZWhvdXNlID0gcmVtb3ZlTnVsbGZyb21TdHJpbmdPYmplY3QobWkuaW4uZ2V0KCJXSExPIikpICAgICAgCiAgICAgZnJvbUJ1eWVyID0gcmVtb3ZlTnVsbGZyb21TdHJpbmdPYmplY3QobWkuaW4uZ2V0KCJGQlVZIikpICAgICAgICAgIAogICAgIHRvQnV5ZXIgPSByZW1vdmVOdWxsZnJvbVN0cmluZ09iamVjdChtaS5pbi5nZXQoIlRCVVkiKSkgICAgICAgICAgCiAgICAgZnJvbVN0YXR1cyA9IHJlbW92ZU51bGxmcm9tU3RyaW5nT2JqZWN0KG1pLmluLmdldCgiRlNUUyIpKSAgICAgICAgICAKICAgICB0b1N0YXR1cyA9IHJlbW92ZU51bGxmcm9tU3RyaW5nT2JqZWN0KG1pLmluLmdldCgiVFNUUyIpKSAgCiAgICAgZnJvbUl0ZW1OdW1iZXIgPSByZW1vdmVOdWxsZnJvbVN0cmluZ09iamVjdChtaS5pbi5nZXQoIkZJVE4iKSkgICAgICAgICAgCiAgICAgdG9JdGVtTnVtYmVyID0gcmVtb3ZlTnVsbGZyb21TdHJpbmdPYmplY3QobWkuaW4uZ2V0KCJUSVROIikpICAKICAgCiAgICAgaWYoIWlzVmFsaWRJbnRlcnZhbChmcm9tQnV5ZXIsIHRvQnV5ZXIsICJidXllciIpKXsgIAogICAgICAgcmV0dXJuIGZhbHNlCiAgICAgfSAKICAgIAogICAgIGlmKCFpc1ZhbGlkSW50ZXJ2YWwoZnJvbVN0YXR1cywgdG9TdGF0dXMsICJzdGF0dXMiKSl7ICAKICAgICAgIHJldHVybiBmYWxzZQogICAgIH0gIAogICAgIAogICAgIGlmKCFpc1ZhbGlkSW50ZXJ2YWwoZnJvbUl0ZW1OdW1iZXIsIHRvSXRlbU51bWJlciwgIml0ZW1udW1iZXIiKSl7ICAKICAgICAgIHJldHVybiBmYWxzZQogICAgIH0gCiAgICAKICAgICB1dUlkID0gamF2YS51dGlsLlVVSUQucmFuZG9tVVVJRCgpLnRvU3RyaW5nKCkKICAgIAogICAgIHJldHJpZXZlVG9kYXlzRGF0ZSgpCiAgICAKICAgICByZXR1cm4gdHJ1ZQoJfQogIAogICAKICAvKgogICAgR2V0IHZhbHVlIGZyb20gTUlUTUFTCiAgKi8KICBwdWJsaWMgdm9pZCBnZXRNSVRNQVMoU3RyaW5nIGluSVROTykgewogICAgCiAgICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiTUlUTUFTIikuc2VsZWN0aW9uKCJNTUlURFMiLCAiTU1HUlRJIikuaW5kZXgoIjAwIikuYnVpbGQoKQogICAgCiAgICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkKICAgICBjb250YWluZXIuc2V0KCJNTUNPTk8iLCBjb21wYW55KQogICAgIGNvbnRhaW5lci5zZXQoIk1NSVROTyIsIGluSVROTykgCiAgICAKICAgICBib29sZWFuIGZvdW5kID0gcXVlcnkucmVhZChjb250YWluZXIpCiAgICAKICAgICBpZiAoIWZvdW5kKSAgewogICAgICAgcmV0dXJuICAKICAgICB9IAogICAgCiAgICAgaXRlbURlc2NyaXB0aW9uID0gY29udGFpbmVyLmdldFN0cmluZygiTU1JVERTIikgCiAgICAgZ3JvdXBUZWNobm9sb2d5Q2xhc3MgPSBjb250YWluZXIuZ2V0U3RyaW5nKCJNTUdSVEkiKSAKICAgICBkZWNpbWFsID0gY29udGFpbmVyLmdldEludCgiTU1EQ0NEIikgIAogICAgIAogIH0KICAgIAogICAgCiAgICAKICAvKgogICAgR2V0IHZhbHVlIGZyb20gTUlUQkFMLCBvdGhlciBrZXl2YWx1ZSAKICAqLwogIHB1YmxpYyB2b2lkIGdldE1JVEJBTDAyKFN0cmluZyBpbklUTk8pewogICAgCiAgICAKICAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJNSVRCQUwiKS5zZWxlY3Rpb24oIk1CU1RRVCIsICJNQkFMUVQiKS5pbmRleCgiMTAiKS5idWlsZCgpCiAgICAKICAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQogICAgIGNvbnRhaW5lci5zZXQoIk1CQ09OTyIsIGNvbXBhbnkpCiAgICAgY29udGFpbmVyLnNldCgiTUJJVE5PIiwgaW5JVE5PLmNvbmNhdCgiLVIiKSkgICAgCiAgICAgY29udGFpbmVyLnNldCgiTUJXSExPIiwgZml4V2FyZWhvdXNlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVzZWQgdG8gZ2V0IGNvcnJlc3BvbmRpbmcgdmFsdWUgdG8gb3JpZ2luIE1JVEJBTCByZWNvcmQKICAgIAogICAgIGJvb2xlYW4gZm91bmQgPSBxdWVyeS5yZWFkKGNvbnRhaW5lcikKICAgIAogICAgIGlmICghZm91bmQpICB7CiAgICAgICByZXR1cm4gIAogICAgIH0KICAgIAogICAgIHN0b2NrQmFsYW5jZTAyID0gY29udGFpbmVyLmdldERvdWJsZSgiTUJTVFFUIikgCiAgICAgYWxsb2NhdGVkUXR5MDIgPSBjb250YWluZXIuZ2V0RG91YmxlKCJNQkFMUVQiKSAgCiAgICAKICB9CiAgICAKICAvKgogICAgR2V0IHZhbHVlIGZyb20gTUlUTE9DCiAgKi8KICBwdWJsaWMgdm9pZCBnZXRNSVRMT0MoU3RyaW5nIGluSVROTywgU3RyaW5nIGluTUZOTykgewogICAgCiAgICAgRXhwcmVzc2lvbkZhY3RvcnkgZXhwTUlUTE9DID0gZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIk1JVExPQyIpIAogICAgIGV4cE1JVExPQyA9IGV4cE1JVExPQy5uZSgiTUxTVFFUIiwgIjAiKQogICAgIERCQWN0aW9uIGRiYU1JVExPQyA9IGRhdGFiYXNlLnRhYmxlKCJNSVRMT0MiKS5zZWxlY3Rpb24oIk1MU1RRVCIsICJNTFdIU0wiKS5tYXRjaGluZyhleHBNSVRMT0MpLmluZGV4KCIxNSIpLmJ1aWxkKCkKICAgICBEQkNvbnRhaW5lciBjb25NSVRMT0MgPSBkYmFNSVRMT0MuZ2V0Q29udGFpbmVyKCkKICAgICBjb25NSVRMT0Muc2V0KCJNTENPTk8iLCBjb21wYW55KQogICAgIGNvbk1JVExPQy5zZXQoIk1MSVROTyIsIGluSVROTykgCiAgICAgY29uTUlUTE9DLnNldCgiTUxCQU5PIiwgaW5NRk5PKSAKICAgICBjb25NSVRMT0Muc2V0KCJNTFdITE8iLCB3YXJlaG91c2UpIAogICAgCiAgICAgZGJhTUlUTE9DLnJlYWRBbGwoY29uTUlUTE9DLCA0LCAxLCByZXN1bHRIYW5kbGVyRm9yTUlUTE9DKSAKICB9CiAgCiAgQ2xvc3VyZTw/PiByZXN1bHRIYW5kbGVyRm9yTUlUTE9DID0geyBEQkNvbnRhaW5lciBjb250YWluZXIgLT4gIAogICAgIGxvY2F0aW9uID0gY29udGFpbmVyLmdldFN0cmluZygiTUxXSFNMIikKICAgICBzdG9ja0JhbGFuY2UgPSBjb250YWluZXIuZ2V0RG91YmxlICgiTUxTVFFUIikgCiAgfQogICAKICAgCiAgICAgICAKICAvKgogICBnZXRNSVRWRU4gLSBHZXQgcmVjb3JkIGluIE1JVFZFTgogICovICAgIAogIFN0cmluZyBnZXRNSVRWRU4oU3RyaW5nIGluU1VOTywgU3RyaW5nIGluSVROTykgIHsgIAogICAgIHN1cHBsaWVySXRlbSA9ICIiICAKICAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJNSVRWRU4iKS5pbmRleCgiMTAiKS5zZWxlY3Rpb24oIklGU0lURSIpLmJ1aWxkKCkgCiAgICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkKICAgICBjb250YWluZXIuc2V0KCJJRkNPTk8iLCBjb21wYW55KSAKICAgICBjb250YWluZXIuc2V0KCJJRlNVTk8iLCBpblNVTk8pICAgCiAgICAgY29udGFpbmVyLnNldCgiSUZJVE5PIiwgaW5JVE5PKSAgIAogICAgIHF1ZXJ5LnJlYWRBbGwoY29udGFpbmVyLCAzLCAxLCByZWxlYXNlZEl0ZW1Qcm9jZXNzb3JNSVRWRU4pIAogIH0KICAKICBDbG9zdXJlPD8+IHJlbGVhc2VkSXRlbVByb2Nlc3Nvck1JVFZFTiA9IHsgREJDb250YWluZXIgY29udGFpbmVyICAtPiAgCiAgICAgc3VwcGxpZXJJdGVtID0gY29udGFpbmVyLmdldCgiSUZTSVRFIikudG9TdHJpbmcoKSAgIAogICAgICAgCiAgfQogIAogIAogICAgICAgCiAgLyoKICAgZ2V0TUNIRUFEIC0gR2V0IHJlY29yZCBpbiBNQ0hFQUQKICAqLyAgICAKICBkb3VibGUgZ2V0TUNIRUFEKFN0cmluZyBpbkZBQ0ksIFN0cmluZyBpbklUTk8pICB7IAogICAgIGNvc3QgPSAwCiAgICAgRXhwcmVzc2lvbkZhY3RvcnkgZXhwTUNIRUFEID0gZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIk1DSEVBRCIpIAogICAgIGV4cE1DSEVBRCA9IGV4cE1DSEVBRC5lcSgiS09QQ1RQIiwgIjMiKQogICAgIGV4cE1DSEVBRCA9IGV4cE1DSEVBRC5hbmQoZXhwTUNIRUFELmVxKCJLT0NST0MiLCAiMCIpKQogICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk1DSEVBRCIpLmluZGV4KCIwMCIpLnJldmVyc2UoKS5tYXRjaGluZyhleHBNQ0hFQUQpLnNlbGVjdGlvbigiS09DU1UxIikuYnVpbGQoKSAKICAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQogICAgIGNvbnRhaW5lci5zZXQoIktPQ09OTyIsIGNvbXBhbnkpIAogICAgIGNvbnRhaW5lci5zZXQoIktPRkFDSSIsIGluRkFDSSkgICAKICAgICBjb250YWluZXIuc2V0KCJLT0lUTk8iLCBpbklUTk8pICAgCiAgICAgcXVlcnkucmVhZEFsbChjb250YWluZXIsIDMsIDEsIHJlbGVhc2VkSXRlbVByb2Nlc3Nvck1DSEVBRCkKICB9CiAgCiAgQ2xvc3VyZTw/PiByZWxlYXNlZEl0ZW1Qcm9jZXNzb3JNQ0hFQUQgPSB7IERCQ29udGFpbmVyIGNvbnRhaW5lciAgLT4gICAKICAgICBjb3N0ID0gIChkb3VibGUpY29udGFpbmVyLmdldERvdWJsZSgiS09DU1UxIikgCiAgICAgICAKICB9IAoKCiAgLyoKICAgIGdldENJRE1BUyAtIEdldCByZWNvcmQgaW4gQ0lETUFTIAogICovCiAgU3RyaW5nIGdldENJRE1BUyhTdHJpbmcgaW5TVU5PKSB7CiAgICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiQ0lETUFTIikuc2VsZWN0aW9uKCJJRFNVTk0iKS5pbmRleCgiMDAiKS5idWlsZCgpCiAgICAKICAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQogICAgIGNvbnRhaW5lci5zZXQoIklEQ09OTyIsIGNvbXBhbnkpCiAgICAgY29udGFpbmVyLnNldCgiSURTVU5PIiwgaW5TVU5PKSAKICAgIAogICAgIGJvb2xlYW4gZm91bmQgPSBxdWVyeS5yZWFkKGNvbnRhaW5lcikKICAgIAogICAgIGlmICghZm91bmQpICB7CiAgICAgICByZXR1cm4gIiIgIAogICAgIH0KICAgICAKICAgICByZXR1cm4gY29udGFpbmVyLmdldFN0cmluZygiSURTVU5NIikKICAgICAgCiAgfQogIAogICAgICAKICAvKgogICBzdW1tYXJpemVGcm9tTVBMSU5FIC0gc3VtbWFyaXplIElCT1JRQSBhbmQgSUJSVlFBCiAgKi8gICAgCiAgcHVibGljIHZvaWQgc3VtbWFyaXplRnJvbU1QTElORShTdHJpbmcgaW5PUlRZLCBTdHJpbmcgaW5XSExPLCBTdHJpbmcgaW5JVE5PKXsgIAogICAgIEV4cHJlc3Npb25GYWN0b3J5IGV4cE1QTElORSA9IGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJNUExJTkUiKSAKICAgICBleHBNUExJTkUgPSBleHBNUExJTkUuZ2UoIklCUFVTTCIsICIxNSIpCiAgICAgZXhwTVBMSU5FID0gZXhwTVBMSU5FLmFuZChleHBNUExJTkUubGUoIklCUFVTTCIsICIyMCIpKQogICAgIGV4cE1QTElORSA9IGV4cE1QTElORS5hbmQoZXhwTVBMSU5FLmVxKCJJQk9SVFkiLCBpbk9SVFkpKQogICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk1QTElORSIpLmluZGV4KCIxMCIpLm1hdGNoaW5nKGV4cE1QTElORSkuc2VsZWN0aW9uKCJJQk9SUUEiLCAiSUJSVlFBIiwgIklCUFVOTyIsICJJQlBOTEkiKS5idWlsZCgpIAogICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpCiAgICAgY29udGFpbmVyLnNldCgiSUJDT05PIiwgY29tcGFueSkgCiAgICAgY29udGFpbmVyLnNldCgiSUJXSExPIiwgaW5XSExPKSAgIAogICAgIGNvbnRhaW5lci5zZXQoIklCSVROTyIsIGluSVROTykgICAKICAgICBxdWVyeS5yZWFkQWxsKGNvbnRhaW5lciwgMywgMTAwLCByZWxlYXNlZEl0ZW1Qcm9jZXNzb3JNUExJTkUpCiAgICAKIH0KICAKIENsb3N1cmU8Pz4gcmVsZWFzZWRJdGVtUHJvY2Vzc29yTVBMSU5FID0geyBEQkNvbnRhaW5lciBjb250YWluZXIgIC0+ICAKICAgICBhY2NPcmRlclF0eU1QTElORSArPSAoZG91YmxlKWNvbnRhaW5lci5nZXREb3VibGUoIklCT1JRQSIpCiAgICAgYWNjUmVjaWV2ZWRRdHkgKz0gKGRvdWJsZSljb250YWluZXIuZ2V0RG91YmxlKCJJQlJWUUEiKSAKIH0KCiAgLyoKICAgc3VtbWFyaXplRnJvbU1NT0hFRCAtIHN1bW1hcml6ZSBRSE9SUUEKICAqLyAgICAKICBwdWJsaWMgdm9pZCBzdW1tYXJpemVGcm9tTU1PSEVEKFN0cmluZyBpbldITE8sIFN0cmluZyBpbklUTk8peyAgCiAgICAgRXhwcmVzc2lvbkZhY3RvcnkgZXhwTU1PSEVEID0gZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIk1NT0hFRCIpIAogICAgIGV4cE1NT0hFRCA9IGV4cE1NT0hFRC5sdCgiUUhXSFNUIiwgIjkwIikgCiAgICAgZXhwTU1PSEVEID0gZXhwTU1PSEVELmFuZChleHBNTU9IRUQuZXEoIlFIV0hMTyIsIGluV0hMTykpCiAgICAgZXhwTU1PSEVEID0gZXhwTU1PSEVELmFuZChleHBNTU9IRUQuZ2UoIlFIU1VGSSIsIGZyb21GaXhTdXBwbGllckl0ZW1OdW1iZXIpKQogICAgIGV4cE1NT0hFRCA9IGV4cE1NT0hFRC5hbmQoZXhwTU1PSEVELmxlKCJRSFNVRkkiLCB0b0ZpeFN1cHBsaWVySXRlbU51bWJlcikpCiAgICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiTU1PSEVEIikuaW5kZXgoIjg5IikubWF0Y2hpbmcoZXhwTU1PSEVEKS5zZWxlY3Rpb24oIlFIT1JRQSIsICJRSE1XTk8iKS5idWlsZCgpIAogICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpCiAgICAgY29udGFpbmVyLnNldCgiUUhDT05PIiwgY29tcGFueSkgICAgCiAgICAgY29udGFpbmVyLnNldCgiUUhQUk5PIiwgaW5JVE5PKSAgIAogICAgIHF1ZXJ5LnJlYWRBbGwoY29udGFpbmVyLCAyLCAxMDAsIHJlbGVhc2VkSXRlbVByb2Nlc3Nvck1NT0hFRCkKICAgIAogfQogIAogQ2xvc3VyZTw/PiByZWxlYXNlZEl0ZW1Qcm9jZXNzb3JNTU9IRUQgPSB7IERCQ29udGFpbmVyIGNvbnRhaW5lciAgLT4gICAKICAgICBhY2NPcmRlclF0eU1NT0hFRCArPSAoZG91YmxlKWNvbnRhaW5lci5nZXREb3VibGUoIlFIT1JRQSIpIAogfQoKICAgICAgIAogIC8qCiAgIHN1bW1hcml6ZUZyb21NUE9QTFAgLSBzdW1tYXJpemUgUE9QUFFUCiAgKi8gICAgCiAgcHVibGljIHZvaWQgc3VtbWFyaXplRnJvbU1QT1BMUChTdHJpbmcgaW5XSExPLCBTdHJpbmcgaW5JVE5PKXsgIAogICAgIEV4cHJlc3Npb25GYWN0b3J5IGV4cE1QTElORSA9IGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJNUE9QTFAiKSAKICAgICBleHBNUExJTkUgPSBleHBNUExJTkUuZXEoIlBPUkUyMCIsIGZpeFJlZmVyZW5jZSkgCiAgICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiTVBPUExQIikuaW5kZXgoIjcwIikubWF0Y2hpbmcoZXhwTVBMSU5FKS5zZWxlY3Rpb24oIlBPUFBRVCIpLmJ1aWxkKCkgCiAgICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkKICAgICBjb250YWluZXIuc2V0KCJQT0NPTk8iLCBjb21wYW55KSAKICAgICBjb250YWluZXIuc2V0KCJQT1dITE8iLCBpbldITE8pICAgCiAgICAgY29udGFpbmVyLnNldCgiUE9JVE5PIiwgaW5JVE5PKSAgIAogICAgIHF1ZXJ5LnJlYWRBbGwoY29udGFpbmVyLCAzLCAxMDAsIHJlbGVhc2VkSXRlbVByb2Nlc3Nvck1QT1BMUCkKICAgIAogfQogIAogQ2xvc3VyZTw/PiByZWxlYXNlZEl0ZW1Qcm9jZXNzb3JNUE9QTFAgPSB7IERCQ29udGFpbmVyIGNvbnRhaW5lciAgLT4gIAogICAgIGFjY1BsYW5uZWRRdHlNUE9QTFAgPSsgKGRvdWJsZSljb250YWluZXIuZ2V0RG91YmxlKCJQT1BQUVQiKQogfQogCiAKICAvKgogICAgR2V0IHZhbHVlIGZyb20gTUlURkFDCiAgKi8KICBkb3VibGUgZ2V0TUlURkFDKFN0cmluZyBpbkZBQ0ksIFN0cmluZyBpbklUTk8pIHsKICAgIAogICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk1JVEZBQyIpLnNlbGVjdGlvbigiTTlVQ09TIikuaW5kZXgoIjAwIikuYnVpbGQoKQogICAgCiAgICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkKICAgICBjb250YWluZXIuc2V0KCJNOUNPTk8iLCBjb21wYW55KQogICAgIGNvbnRhaW5lci5zZXQoIk05RkFDSSIsIGluRkFDSSkgCiAgICAgY29udGFpbmVyLnNldCgiTTlJVE5PIiwgaW5JVE5PKSAKICAgIAogICAgIGJvb2xlYW4gZm91bmQgPSBxdWVyeS5yZWFkKGNvbnRhaW5lcikKICAgIAogICAgIGlmICghZm91bmQpICB7CiAgICAgICByZXR1cm4gIDAKICAgICB9ICAKICAgICAKICAgICByZXR1cm4gKGRvdWJsZSljb250YWluZXIuZ2V0RG91YmxlKCJNOVVDT1MiKSAKICB9CiAgCiAgIAogIC8qCiAgICBSZXR1cm4gdHJ1ZSBpZiByZWNvcmQgZXhpc3QuIAogICovCiAgIGludCBnZXRDU1lDQUwoaW50IGluREFURSkgewogICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIkNTWUNBTCIpLnNlbGVjdGlvbigiQ0RZV0Q1IiwgIkNEQ0ROTyIpLmluZGV4KCIwMCIpLmJ1aWxkKCkKICAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQogICAgIGNvbnRhaW5lci5zZXQoIkNEQ09OTyIsIGNvbXBhbnkpICAgCiAgICAgY29udGFpbmVyLnNldCgiQ0RESVZJIiwgIiAiKSAgCiAgICAgY29udGFpbmVyLnNldCgiQ0RZTUQ4IiwgaW5EQVRFKSAgIAogICAgCiAgICAgYm9vbGVhbiBmb3VuZCA9IHF1ZXJ5LnJlYWQoY29udGFpbmVyKQogICAgICAgCiAgICAgaWYgKCFmb3VuZCkgIHsKICAgICAgIHJldHVybiAwCiAgICAgfSAKICAgICBkYXlOdW1iZXIgPSBjb250YWluZXIuZ2V0SW50KCJDRENETk8iKSAgCiAgICAgcmV0dXJuIChpbnQpY29udGFpbmVyLmdldEludCgiQ0RZV0Q1IikKICAgfQogICAKICAvKgogICAgUmV0dXJuIHRydWUgaWYgcmVjb3JkIGV4aXN0LiAKICAqLwogICBwdWJsaWMgdm9pZCBnZXRDU1lDQUxOZXdEYXRlRnJvbVdlZWsoaW50IGluWVdENSkgeyAKICAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJDU1lDQUwiKS5zZWxlY3Rpb24oIkNEWU1EOCIpLmluZGV4KCI0MCIpLmJ1aWxkKCkKICAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQogICAgIGNvbnRhaW5lci5zZXQoIkNEQ09OTyIsIGNvbXBhbnkpICAgCiAgICAgY29udGFpbmVyLnNldCgiQ0RESVZJIiwgIiAiKSAgCiAgICAgY29udGFpbmVyLnNldCgiQ0RZV0Q1IiwgaW5ZV0Q1KSAgIAogICAgIAogICAgIHF1ZXJ5LnJlYWRBbGwoY29udGFpbmVyLCAzLCAxLCByZXN1bHRIYW5kbGVyRm9yQ1NZQ0FMV2VlaykgIAogIH0KICAKICBDbG9zdXJlPD8+IHJlc3VsdEhhbmRsZXJGb3JDU1lDQUxXZWVrID0geyBEQkNvbnRhaW5lciBjb250YWluZXIgLT4gICAKICAgICBuZXh0RnJpZGF5ID0gY29udGFpbmVyLmdldEludCgiQ0RZTUQ4IikKICAgfQogICAKICAgCiAgICAvKgogICAgUmV0dXJuIHRydWUgaWYgcmVjb3JkIGV4aXN0LiAKICAqLwogICBwdWJsaWMgdm9pZCBnZXRDU1lDQUxOZXdEYXRlRnJvbURheShpbnQgaW5DRE5PKSB7CiAgICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiQ1NZQ0FMIikuc2VsZWN0aW9uKCJDRFlNRDgiKS5pbmRleCgiNTAiKS5idWlsZCgpCiAgICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkKICAgICBjb250YWluZXIuc2V0KCJDRENPTk8iLCBjb21wYW55KSAgIAogICAgIGNvbnRhaW5lci5zZXQoIkNERElWSSIsICIgIikgIAogICAgIGNvbnRhaW5lci5zZXQoIkNEQ0ROTyIsIGluQ0ROTykgICAKICAgICAKICAgICBxdWVyeS5yZWFkQWxsKGNvbnRhaW5lciwgMywgMSwgcmVzdWx0SGFuZGxlckZvckNTWUNBTCkgIAogIH0KICAKICBDbG9zdXJlPD8+IHJlc3VsdEhhbmRsZXJGb3JDU1lDQUwgPSB7IERCQ29udGFpbmVyIGNvbnRhaW5lciAtPiAgIAogICAgIG5leHRGcmlkYXkgPSBjb250YWluZXIuZ2V0SW50KCJDRFlNRDgiKQogICB9CiAgIAogICAKICAvKgogICAgY2xlYXJWYWx1ZSAtIGNsZWFyIHZhbHVlICAKICAqLwogIAogIHB1YmxpYyB2b2lkIGNsZWFyVmFsdWUoKSB7CiAgICAKICAgICBpdGVtRGVzY3JpcHRpb24gPSAiIgogICAgIGdyb3VwVGVjaG5vbG9neUNsYXNzID0gIiIgIAogICAgIHN0b2NrQmFsYW5jZTAyID0gMAogICAgIGFsbG9jYXRlZFF0eTAyID0gMCAKICAgICBsb2NhdGlvbiA9ICIiCiAgICAgc3RvY2tCYWxhbmNlID0gMCAKICAgICBhY2NPcmRlclF0eU1NT0hFRCA9IDAKICAgICBhY2NPcmRlclF0eU1QTElORSA9IDAgCiAgICAgYWNjUmVjaWV2ZWRRdHkgPSAwCiAgICAgbG9jYXRpb24gPSAiIgogICAgIHN0b2NrQmFsYW5jZSA9IDAKICB9CiAgCiAgCiAgLyoKICAgICByZXR1cm4gdHJ1ZSBpZiBvawogICovCiAgYm9vbGVhbiBpc1ZhbGlkSW50ZXJ2YWwoU3RyaW5nIGluRlJPTSwgU3RyaW5nIGluVE8sIFN0cmluZyBpblZBTFUpIHsKICAgICBpZihpblRPIDwgaW5GUk9NKXsgIAogICAgICAgIG1pLmVycm9yKCJXcm9uZyByZWxhdGlvbiBiZXR3ZWVuIGZyb20tIGFuZCB0byAke2luVkFMVX0iKQogICAgICAgIHJldHVybiBmYWxzZQogICAgICB9IAogICAgCiAgICAKICAgICAgaWYoaW5GUk9NID4gIiIgJiYgIGluVE8gPT0gIiIgfHwgaW5UTyA+ICIiICYmICBpbkZST00gPT0gIiIgKXsgIAogICAgICAgICBtaS5lcnJvcigiQm90aCAke2luVkFMVX0gbXVzdCBiZSBlbnRlcmVkIikKICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfSAgICAKICAgIAogICAgICByZXR1cm4gdHJ1ZQogfSAgCiAKICAKICAgIAogIC8qCiAgIGdldE9yZGVyVHlwZUNVR0VYMyAtIEdldCBvcmRlcnR5cGUgZm9yIFJFTgogICovICAgIAogIHB1YmxpYyB2b2lkIGdldE9yZGVyVHlwZUNVR0VYMyhpbkZBQ0kpICB7ICAKICAgIAogICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIkNVR0VYMyIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiRjNBMDMwIikuYnVpbGQoKSAKICAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQogICAgIGNvbnRhaW5lci5zZXQoIkYzQ09OTyIsIGNvbXBhbnkpIAogICAgIGNvbnRhaW5lci5zZXQoIkYzS1BJRCIsICJSRU5fUE9UWVBFIikgICAKICAgICBjb250YWluZXIuc2V0KCJGM1BLMDEiLCBpbkZBQ0kpICAgCiAgICAgcXVlcnkucmVhZEFsbChjb250YWluZXIsIDMsIDEsIHJlbGVhc2VkSXRlbVByb2Nlc3NvckNVR0VYMykgCiAgfQogIAogIENsb3N1cmU8Pz4gcmVsZWFzZWRJdGVtUHJvY2Vzc29yQ1VHRVgzID0geyBEQkNvbnRhaW5lciBjb250YWluZXIgIC0+ICAgCiAgICAgb3JkZXJUeXBlID0gY29udGFpbmVyLmdldFN0cmluZygiRjNBMDMwIikgCiAgICAgICAKICB9IAogICAKICAvKgogICAgR2V0IHRvZGF5cyBkYXRlCiAgKi8KICBwdWJsaWMgdm9pZCByZXRyaWV2ZVRvZGF5c0RhdGUoKSB7CiAgICAgTG9jYWxEYXRlVGltZSBkYXRlVGltZSA9IGphdmEudGltZS5Mb2NhbERhdGVUaW1lLm5vdygpCiAgICAgZW50cnlEYXRlID0gZGF0ZVRpbWUuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkudG9JbnRlZ2VyKCkgCiAgICAgZW50cnlUaW1lID0gZGF0ZVRpbWUuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigiSEhtbXNzIikpLnRvSW50ZWdlcigpCiAgfQogIAogICAKICAgIC8qCiAgICBjaGVjayBpZiBmaWVsZCBmcm9tIE1JIGlzIG51bGwuIFJldHVybiBlbXB0eSBzdHJpbmcgaW4gdGhhdCBjYXNlCiAgKi8gIAogICBTdHJpbmcgcmVtb3ZlTnVsbGZyb21TdHJpbmdPYmplY3QoT2JqZWN0IGZpZWxkKXsKICAgICAgaWYgKGZpZWxkID09IG51bGwpIHsgIAogICAgICAgIHJldHVybiAiIgogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBmaWVsZAogICAgICB9CiAgIH0KfSAKIA=="}}}