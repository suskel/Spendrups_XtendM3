{"programModules":{"EXT730MI":{"program":"EXT730MI","triggers":{},"transactions":{"LstLocation":{"sourceUuid":"b0e659c7-3d08-48e0-9228-e248091f54b9","name":"LstLocation","program":"EXT730MI","description":"List location, Novacura","active":true,"multi":true,"modified":1751284791148,"modifiedBy":"EXT_SK","outputFields":[{"name":"WHLO","description":"Warehouse","length":3,"mandatory":false,"type":"A","refField":null},{"name":"WHLT","description":"Location type","length":2,"mandatory":false,"type":"A","refField":null},{"name":"WHSL","description":"Location","length":10,"mandatory":false,"type":"A","refField":null},{"name":"SLDS","description":"Name","length":30,"mandatory":false,"type":"A","refField":null},{"name":"ALOC","description":"Allocatanle","length":1,"mandatory":false,"type":"N","refField":null},{"name":"ITNO","description":"Item","length":15,"mandatory":false,"type":"A","refField":null},{"name":"BANO","description":"Lotnumber","length":20,"mandatory":false,"type":"A","refField":null},{"name":"STQT","description":"On hand balance","length":17,"mandatory":false,"type":"N","refField":null},{"name":"BREM","description":"Remark","length":20,"mandatory":false,"type":"A","refField":null},{"name":"BREF","description":"Lot reference 1","length":20,"mandatory":false,"type":"A","refField":null},{"name":"BRE2","description":"Lot reference 2","length":20,"mandatory":false,"type":"A","refField":null},{"name":"ITDS","description":"Item description","length":60,"mandatory":false,"type":"A","refField":null},{"name":"ATT1","description":"Attribute (BRATTR)","length":200,"mandatory":false,"type":"A","refField":null},{"name":"ATNR","description":"Attributenumber","length":17,"mandatory":false,"type":"N","refField":null},{"name":"MVOL","description":"Max storage volume","length":17,"mandatory":false,"type":"N","refField":null},{"name":"CNDT","description":"Follow up date","length":8,"mandatory":false,"type":"N","refField":null}],"inputFields":[{"name":"WHLO","description":"Warehouse","length":3,"mandatory":false,"type":"A","refField":null},{"name":"WHLT","description":"Location type","length":2,"mandatory":false,"type":"A","refField":null},{"name":"ATMO","description":"Attribute model","length":10,"mandatory":false,"type":"A","refField":null},{"name":"ATI1","description":"Attribute (ex BRYGG","length":15,"mandatory":false,"type":"A","refField":null}],"utilities":[],"market":"ALL"}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"b0e659c7-3d08-48e0-9228-e248091f54b9":{"uuid":"b0e659c7-3d08-48e0-9228-e248091f54b9","updated":1752565579345,"updatedBy":"EXT_SK","created":1750282787821,"createdBy":"EXT_SK","apiVersion":"0.21","beVersion":"16.0.0.20250521011729.6","language":"GROOVY","codeHash":"ADF2901A6E12EF5A4AF2D8D80916100B13C9845D702E27DD38F460437515B56B","code":"LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCiBFeHRlbnNpb24gTmFtZTogRVhUNzMwTUkvTHN0TG9jYXRpb24NCiBUeXBlOiBFeHRlbmRNM1RyYW5zYWN0aW9uDQogU2NyaXB0IEF1dGhvcjogU3VzYW5uYSBLZWxsYW5kZXIgLSBFbHZlbml0ZQ0KIERhdGU6IDIwMjQtMTAtMTQNCiBEZXNjcmlwdGlvbjogTGlzdCByZWNvcmQgZnJvbSBNSVRQQ0UsIGFkZGVkIGZpZWxkcyBhcmUgTUlUTUFTLCBNSVRMT0MsIE1JQVRUUiANCiANCg0KIFJldmlzaW9uIEhpc3Rvcnk6DQogTmFtZSAgICAgICAgICAgICAgICAgICAgRGF0ZSAgICAgICAgICAgICBWZXJzaW9uICAgICAgICAgIERlc2NyaXB0aW9uIG9mIENoYW5nZXMNCiBTdXNhbm5hIEtlbGxhbmRlciAgICAgICAyMDI0LTEwLTE0ICAgICAgIDEuMCAgICAgICAgICAgICAgU1AwMDA5IC0gTGlzdCByZWNvcmQgZnJvbSBNSVRQQ0UsIGFkZGVkIGZpZWxkcyBhcmUgTUlUTUFTLCBNSVRMT0MsIE1JQVRUUg0KKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLw0KcHVibGljIGNsYXNzIExzdExvY2F0aW9uIGV4dGVuZHMgRXh0ZW5kTTNUcmFuc2FjdGlvbiB7IA0KICBwcml2YXRlIGZpbmFsIE1JQVBJIG1pDQoJcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZQ0KCXByaXZhdGUgZmluYWwgTG9nZ2VyQVBJIGxvZ2dlcg0KCXByaXZhdGUgZmluYWwgTUlDYWxsZXJBUEkgbWlDYWxsZXIgDQoJcHJpdmF0ZSBmaW5hbCBQcm9ncmFtQVBJIHByb2dyYW0NCgkNCglpbnQgY29tcGFueSA9IDAgDQoJU3RyaW5nIHdhcmVob3VzZSA9ICIiICAgDQoJU3RyaW5nIGxvY2F0aW9uVHlwZSA9ICIiDQoJU3RyaW5nIGF0dHJpYnV0ZU1vZGVsID0gIiINCiAgU3RyaW5nIGF0dHJpYnV0ZUlkMSA9ICIiIA0KCQ0KCVN0cmluZyBsb2NhdGlvbiA9ICIiDQoJU3RyaW5nIG5hbWUgPSAiIiANCglpbnQgYWxsb2NhdGFibGUgPSAwDQoJDQogIFN0cmluZ1tdIGFycmF5QXR0cmlidXRlMSA9IG5ldyBTdHJpbmdbMTBdIA0KICBpbnQgY291bnQxID0gMCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlIHdoZW4gcHV0IHRvIGFycmF5cyAgDQogIFN0cmluZyBhdHRyaWJ1dGVWYWx1ZTEgPSAiIg0KICBTdHJpbmcgYXR0cmlidXRlVmFsdWUyID0gIiINCiAgU3RyaW5nIGF0dHJpYnV0ZVZhbHVlMyA9ICIiDQogIFN0cmluZyBhdHRyaWJ1dGVWYWx1ZTQgPSAiIg0KICBTdHJpbmcgYXR0cmlidXRlVmFsdWU1ID0gIiINCiAgU3RyaW5nIGF0dHJpYnV0ZVZhbHVlNiA9ICIiDQogIFN0cmluZyBhdHRyaWJ1dGVWYWx1ZTcgPSAiIg0KICBTdHJpbmcgYXR0cmlidXRlVmFsdWU4ID0gIiINCiAgU3RyaW5nIGF0dHJpYnV0ZVZhbHVlOSA9ICIiDQogIFN0cmluZyBhdHRyaWJ1dGVWYWx1ZTEwID0gIiIgDQogIFN0cmluZyBmcm9tQXR0cmlidXQgPSAiIg0KICBTdHJpbmcgdG9BdHRyaWJ1dCA9ICIiDQogIGludCBjb3VudGVyID0gMCANCglFeHByZXNzaW9uRmFjdG9yeSBleHAgDQoJYm9vbGVhbiAgbm9SZWNvcmRGb3VuZE1JVExPQyA9IGZhbHNlIA0KCWxvbmcgYXR0cmlidXRlTnVtYmVyID0gMA0KCWRvdWJsZSBtYXhTdG9yYWdlVm9sdW1lID0gMCAgICAgICAgIA0KCWludCBmb2xsb3dVcERhdGUgPSAwDQoJIA0KCU1hcDxTdHJpbmcsIERCQ29udGFpbmVyPiBjYWNoZWRJdGVtcyA9IG5ldyBIYXNoTWFwPFN0cmluZywgREJDb250YWluZXI+KCkNCiAgTWFwPFN0cmluZywgREJDb250YWluZXI+IGNhY2hlZEl0ZW1zTG90ID0gbmV3IEhhc2hNYXA8U3RyaW5nLCBEQkNvbnRhaW5lcj4oKQ0KICANCiAgIA0KCXB1YmxpYyBMc3RMb2NhdGlvbihNSUFQSSBtaSwgRGF0YWJhc2VBUEkgZGF0YWJhc2UsUHJvZ3JhbUFQSSBwcm9ncmFtLCBMb2dnZXJBUEkgbG9nZ2VyKSB7DQogICAgIHRoaXMubWkgPSBtaQ0KICAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2UNCiAgICAgdGhpcy5sb2dnZXIgPSBsb2dnZXINCiAgICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbQ0KICB9DQoNCgkNCiAgLyoNCiAgICBtYWluIG1ldGhvZA0KICAqLw0KICBwdWJsaWMgdm9pZCBtYWluKCkgeyAgDQogICAgIGlmKHJldHJpZXZlSW5wdXRQYXJhbWV0ZXJzKCkpIHsgDQogICAgICAgc2VsZWN0TUlUUENFKCkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzYXZlIGluIGFycmF5IA0KICAgICB9IA0KICB9IA0KICANCiAgIA0KIC8qDQogICAgIHNlbGVjdE1JVFBDRSAtIHNlbGVjdCBNSVRQQ0UgdmlhIGV4cHJlc3Npb24NCiAgKi8NCiAgcHVibGljIHZvaWQgc2VsZWN0TUlUUENFKCl7ICANCiAgICAgY3J0RXhwcmVzc2lvbigpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgREJBY3Rpb24gZGJhTUlUUENFID0gZGF0YWJhc2UudGFibGUoIk1JVFBDRSIpLnNlbGVjdGlvbigiTVNXSExPIiwgIk1TV0hMVCIsICJNU1dIU0wiLCAiTVNTTERTIiwgIk1TQUxPQyIsICJNU01WT0wiKS5tYXRjaGluZyhleHApLmluZGV4KCIwMCIpLmJ1aWxkKCkgIA0KICAgICBEQkNvbnRhaW5lciBjb25NSVRQQ0UgPSBkYmFNSVRQQ0UuZ2V0Q29udGFpbmVyKCkNCiAgICAgY29uTUlUUENFLnNldCgiTVNDT05PIiwgY29tcGFueSkgDQogICAgIGRiYU1JVFBDRS5yZWFkQWxsKGNvbk1JVFBDRSwgMSwgMzAwMCwgcmVzdWx0SGFuZGxlckZvck1JVFBDRSkgIA0KICB9ICAgDQogICAgDQogIENsb3N1cmU8Pz4gcmVzdWx0SGFuZGxlckZvck1JVFBDRSA9IHsgREJDb250YWluZXIgY29uTUlUUENFIC0+ICANCiAgICAgd2FyZWhvdXNlID0gY29uTUlUUENFLmdldFN0cmluZygiTVNXSExPIikNCiAgICAgbG9jYXRpb25UeXBlID0gY29uTUlUUENFLmdldFN0cmluZygiTVNXSExUIikNCiAgICAgbG9jYXRpb24gPSBjb25NSVRQQ0UuZ2V0U3RyaW5nKCJNU1dIU0wiKQ0KICAgICBuYW1lID0gY29uTUlUUENFLmdldFN0cmluZygiTVNTTERTIikNCiAgICAgYWxsb2NhdGFibGUgPSBjb25NSVRQQ0UuZ2V0SW50KCJNU0FMT0MiKQ0KICAgICBtYXhTdG9yYWdlVm9sdW1lID0gY29uTUlUUENFLmdldERvdWJsZSgiTVNNVk9MIikNCiAgICAgDQogICAgICANCiAgICAgc2VsZWN0TUlUTE9DKCkgDQogICAgIGlmKCFub1JlY29yZEZvdW5kTUlUTE9DKXsNCiAgICAgICAgc2VuZE91dHB1dE5vUmVjb3JkSW5NSVRMT0MoY29uTUlUUENFKQ0KICAgICB9DQogIH0gIA0KICAgDQoNCiAgDQogIC8qDQogICAgIENyZWF0ZSBleHByZXNzaW9uIA0KICAqLw0KICBwdWJsaWMgdm9pZCBjcnRFeHByZXNzaW9uKCl7IA0KICAgICBleHAgPSBkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiTUlUUENFIikgDQogICAgIGlmKHdhcmVob3VzZSAhPSAiIil7DQogICAgICAgZXhwID0gZXhwLmVxKCJNU1dITE8iLCB3YXJlaG91c2UpICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICB9ZWxzZXsNCiAgICAgICBleHAgPSBleHAuZ2UoIk1TV0hMTyIsICIiKSAgDQogICAgIH0NCiAgICAgaWYobG9jYXRpb25UeXBlICE9ICIiKXsgDQogICAgICAgZXhwID0gZXhwLmFuZChleHAuZXEoIk1TV0hMVCIsIGxvY2F0aW9uVHlwZSkpIA0KICAgICB9DQogIH0NCiAgICAgIA0KDQogIC8qDQogICAgIHNlbGVjdE1JVExPQyAtIHNlbGVjdCBNSVRMT0MsIGZvciBhY3R1YWwgd2FyZWhvdXNlIGFuZCBsb2NhdGlvbg0KICAqLw0KICBwdWJsaWMgdm9pZCBzZWxlY3RNSVRMT0MoKXsgICANCiAgICAgbm9SZWNvcmRGb3VuZE1JVExPQyA9IGZhbHNlICANCiAgICAgREJBY3Rpb24gZGJhTUlUTE9DID0gZGF0YWJhc2UudGFibGUoIk1JVExPQyIpLnNlbGVjdGlvbigiTUxJVE5PIiwgIk1MQkFOTyIsICJNTFNUUVQiLCAiTUxCUkVNIiwgIk1MQlJFRiIsICJNTEJSRTIiLCAiTUxBVE5SIikuaW5kZXgoIjQxIikuYnVpbGQoKSAgDQogICAgIERCQ29udGFpbmVyIGNvbk1JVExPQyA9IGRiYU1JVExPQy5nZXRDb250YWluZXIoKQ0KICAgICBjb25NSVRMT0Muc2V0KCJNTENPTk8iLCBjb21wYW55KSANCiAgICAgY29uTUlUTE9DLnNldCgiTUxXSExPIiwgd2FyZWhvdXNlKSANCiAgICAgY29uTUlUTE9DLnNldCgiTUxXSFNMIiwgbG9jYXRpb24pIA0KICAgICBkYmFNSVRMT0MucmVhZEFsbChjb25NSVRMT0MsIDMsIDIwMCwgcmVzdWx0SGFuZGxlckZvck1JVExPQykgIA0KICB9ICAgDQogICAgDQogIENsb3N1cmU8Pz4gcmVzdWx0SGFuZGxlckZvck1JVExPQyA9IHsgREJDb250YWluZXIgY29uTUlUTE9DIC0+ICANCiAgICAgc2VuZE91dHB1dChjb25NSVRMT0MpIA0KICAgICBub1JlY29yZEZvdW5kTUlUTE9DID0gdHJ1ZQ0KICB9ICANCiAgIA0KICAvKg0KICAgIHNlbmRPdXRwdXQgLSBzZW5kIG91dCBpbmZvcm1hdGlvbg0KICAqLyAgDQogIHB1YmxpYyB2b2lkIHNlbmRPdXRwdXQoREJDb250YWluZXIgY29uTUlUTE9DKSB7ICAgDQogICAgDQogICAgIG1pLm91dERhdGEucHV0KCJXSExPIiwgd2FyZWhvdXNlKQ0KICAgICBtaS5vdXREYXRhLnB1dCgiV0hMVCIsIGxvY2F0aW9uVHlwZSkNCiAgICAgbWkub3V0RGF0YS5wdXQoIldIU0wiLCBsb2NhdGlvbikgDQogICAgIG1pLm91dERhdGEucHV0KCJTTERTIiwgbmFtZSkgDQogICAgIG1pLm91dERhdGEucHV0KCJNVk9MIiwgbWF4U3RvcmFnZVZvbHVtZS50b1N0cmluZygpKSANCiAgICAgbWkub3V0RGF0YS5wdXQoIklUTk8iLCBjb25NSVRMT0MuZ2V0U3RyaW5nKCJNTElUTk8iKS50b1N0cmluZygpKSAgDQogICAgIG1pLm91dERhdGEucHV0KCJCQU5PIiwgY29uTUlUTE9DLmdldFN0cmluZygiTUxCQU5PIikudG9TdHJpbmcoKSkgICANCiAgICAgbWkub3V0RGF0YS5wdXQoIlNUUVQiLCBjb25NSVRMT0MuZ2V0RG91YmxlKCJNTFNUUVQiKS50b1N0cmluZygpKSAgIA0KICAgICBtaS5vdXREYXRhLnB1dCgiQlJFTSIsIGNvbk1JVExPQy5nZXRTdHJpbmcoIk1MQlJFTSIpLnRvU3RyaW5nKCkpICAgDQogICAgIG1pLm91dERhdGEucHV0KCJCUkVGIiwgY29uTUlUTE9DLmdldFN0cmluZygiTUxCUkVGIikudG9TdHJpbmcoKSkgICANCiAgICAgbWkub3V0RGF0YS5wdXQoIkJSRTIiLCBjb25NSVRMT0MuZ2V0U3RyaW5nKCJNTEJSRTIiKS50b1N0cmluZygpKSAgDQogICAgIG1pLm91dERhdGEucHV0KCJJVERTIiwgZ2V0TUlUTUFTKGNvbk1JVExPQy5nZXRTdHJpbmcoIk1MSVROTyIpLnRvU3RyaW5nKCkpKSAgDQogICAgIGdldE1JTE9NQShjb25NSVRMT0MuZ2V0U3RyaW5nKCJNTElUTk8iKS50b1N0cmluZygpLCBjb25NSVRMT0MuZ2V0U3RyaW5nKCJNTEJBTk8iKS50b1N0cmluZygpKQ0KICAgICBpZihhdHRyaWJ1dGVOdW1iZXIgID4gMCAmJiBhdHRyaWJ1dGVNb2RlbCAhPSAiIil7DQogICAgICAgbWkub3V0RGF0YS5wdXQoIkFUVDEiLCBnZXRBdHRyaWJ1dGVWYWx1ZShhdHRyaWJ1dGVOdW1iZXIsIGF0dHJpYnV0ZU1vZGVsKSkgICAgIC8vIEJSWUdHJSANCiAgICAgfWVsc2V7DQogICAgICAgbWkub3V0RGF0YS5wdXQoIkFUVDEiLCAiIikNCiAgICAgfQ0KICAgICBtaS5vdXREYXRhLnB1dCgiQ05EVCIsIGZvbGxvd1VwRGF0ZS50b1N0cmluZygpKQ0KICAgICBtaS5vdXREYXRhLnB1dCgiQVROUiIsIGF0dHJpYnV0ZU51bWJlci50b1N0cmluZygpKSAgDQogICAgIG1pLndyaXRlKCkgDQogICAgIA0KIH0NCiAgDQogICAvKg0KICAgIHNlbmRPdXRwdXROb1JlY29yZEluTUlUTE9DIC0gc2VuZCBvdXQgaW5mb3JtYXRpb24gd2hlbiBubyBNSVRMT0MgaXMgZm91bmQNCiAgKi8gIA0KICBwdWJsaWMgdm9pZCBzZW5kT3V0cHV0Tm9SZWNvcmRJbk1JVExPQyhEQkNvbnRhaW5lciBjb25NSVRQQ0UpIHsgICANCiAgICANCiAgICAgbWkub3V0RGF0YS5wdXQoIldITE8iLCB3YXJlaG91c2UpDQogICAgIG1pLm91dERhdGEucHV0KCJXSExUIiwgbG9jYXRpb25UeXBlKQ0KICAgICBtaS5vdXREYXRhLnB1dCgiV0hTTCIsIGxvY2F0aW9uKSANCiAgICAgbWkub3V0RGF0YS5wdXQoIlNMRFMiLCBuYW1lKSANCiAgICAgbWkub3V0RGF0YS5wdXQoIk1WT0wiLCBtYXhTdG9yYWdlVm9sdW1lLnRvU3RyaW5nKCkpIA0KICAgICBtaS5vdXREYXRhLnB1dCgiSVROTyIsICIiKSAgDQogICAgIG1pLm91dERhdGEucHV0KCJCQU5PIiwgIiIpIA0KICAgICBtaS5vdXREYXRhLnB1dCgiU1RRVCIsICIiKSANCiAgICAgbWkub3V0RGF0YS5wdXQoIkJSRU0iLCAiIikgDQogICAgIG1pLm91dERhdGEucHV0KCJCUkVGIiwgIiIpICANCiAgICAgbWkub3V0RGF0YS5wdXQoIkJSRTIiLCAiIikgIA0KICAgICBtaS5vdXREYXRhLnB1dCgiSVREUyIsICIiKSAgDQogICAgIG1pLm91dERhdGEucHV0KCJBVFQxIiwgIiIpDQogICAgIG1pLm91dERhdGEucHV0KCJBVE5SIiwgIiIpDQogICAgIG1pLm91dERhdGEucHV0KCJDTkRUIiwgIiIpDQogICAgIG1pLndyaXRlKCkgDQogICAgIA0KIH0NCiAgDQogDQogICAvKg0KICAgICByZXRyaWV2ZSBhbmQgY2hlY2sgaW5wdXQgcGFyYW1ldGVycw0KCSovDQoJYm9vbGVhbiByZXRyaWV2ZUlucHV0UGFyYW1ldGVycygpIHsNCgkgIA0KCQkgY29tcGFueSA9IChJbnRlZ2VyKXByb2dyYW0uZ2V0TERBWkQoKS5DT05PICAgDQogICAgIHdhcmVob3VzZSA9IHJlbW92ZU51bGxmcm9tU3RyaW5nT2JqZWN0KG1pLmluLmdldCgiV0hMTyIpKSAgDQogICAgIGxvY2F0aW9uVHlwZSA9IHJlbW92ZU51bGxmcm9tU3RyaW5nT2JqZWN0KG1pLmluLmdldCgiV0hMVCIpKSAgICAgDQogICAgIGF0dHJpYnV0ZU1vZGVsID0gcmVtb3ZlTnVsbGZyb21TdHJpbmdPYmplY3QobWkuaW4uZ2V0KCJBVE1PIikpICAgICAgICAgIA0KICAgICBhdHRyaWJ1dGVJZDEgPSByZW1vdmVOdWxsZnJvbVN0cmluZ09iamVjdChtaS5pbi5nZXQoIkFUSTEiKSkgICAgICAgICAvLyBCUllHRyUgICAgDQogICAgDQogICAgIGlmKGF0dHJpYnV0ZUlkMSAhPSAiIiAmJiBhdHRyaWJ1dGVNb2RlbCAhPSAiIil7DQogICAgICAgYWRkVG9BcnJheUZvckJSQVRUUihhdHRyaWJ1dGVJZDEpICANCiAgICAgfQ0KICAgIA0KICAgICByZXR1cm4gdHJ1ZQ0KCX0NCiANCiAgDQogICAgIA0KICANCiAgIC8qDQogICAgR2V0IHZhbHVlIGZvciBwcmVkZWZpbmVkIGF0dHJpYnV0ZSBJRCANCiAgKi8NCiAgU3RyaW5nIGdldEF0dHJpYnV0ZVZhbHVlKGxvbmcgaW5BVE5SLCBTdHJpbmcgaW5BVE1PKSB7DQogICAgDQogICAgIGNsZWFyVmFsdWUoKQ0KICAgICANCiAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBhcnJheUF0dHJpYnV0ZTEubGVuZ3RoOyBpKyspIHsgICANCiAgICAgICBpZihhcnJheUF0dHJpYnV0ZTFbaV0gPT0gbnVsbCkgeyANCiAgICAgICAgIGkgPSAxMA0KICAgICAgIH1lbHNleyANCiAgICAgICAgIGdldE1JQVRUUihhcnJheUF0dHJpYnV0ZTFbaV0sIGksIGluQVROUiwgaW5BVE1PKQ0KICAgICAgIH0NCiAgICAgfQ0KICAgIA0KICAgIA0KICAgICAvLyBLZWVwIHRoZSBmaWVsZCBsZW5ndGggKDE1KSB0byBiZSBhYmxlIHRvIGZldGNoIHRoZW0gbGF0ZXIgaW4gYXBwDQogICAgIFN0cmluZyBuZXcxID0gYXR0cmlidXRlVmFsdWUxLnBhZFJpZ2h0KDE1LCAnICcpICANCiAgICAgU3RyaW5nIG5ldzIgPSBhdHRyaWJ1dGVWYWx1ZTIucGFkUmlnaHQoMTUsICcgJykgIA0KICAgICBTdHJpbmcgbmV3MyA9IGF0dHJpYnV0ZVZhbHVlMy5wYWRSaWdodCgxNSwgJyAnKSAgDQogICAgIFN0cmluZyBuZXc0ID0gYXR0cmlidXRlVmFsdWU0LnBhZFJpZ2h0KDE1LCAnICcpICANCiAgICAgU3RyaW5nIG5ldzUgPSBhdHRyaWJ1dGVWYWx1ZTUucGFkUmlnaHQoMTUsICcgJykgIA0KICAgICBTdHJpbmcgbmV3NiA9IGF0dHJpYnV0ZVZhbHVlNi5wYWRSaWdodCgxNSwgJyAnKSAgDQogICAgIFN0cmluZyBuZXc3ID0gYXR0cmlidXRlVmFsdWU3LnBhZFJpZ2h0KDE1LCAnICcpICANCiAgICAgU3RyaW5nIG5ldzggPSBhdHRyaWJ1dGVWYWx1ZTgucGFkUmlnaHQoMTUsICcgJykgIA0KICAgICBTdHJpbmcgbmV3OSA9IGF0dHJpYnV0ZVZhbHVlOS5wYWRSaWdodCgxNSwgJyAnKSAgDQogICAgIFN0cmluZyBuZXcxMCA9IGF0dHJpYnV0ZVZhbHVlMTAucGFkUmlnaHQoMTUsICcgJykgIA0KICAgIA0KICAgICBTdHJpbmcgbmV3MTEgID0gbmV3MS50YWtlKDE1KSANCiAgICAgU3RyaW5nIG5ldzEyICA9IG5ldzIudGFrZSgxNSkgDQogICAgIFN0cmluZyBuZXcxMyAgPSBuZXczLnRha2UoMTUpIA0KICAgICBTdHJpbmcgbmV3MTQgID0gbmV3NC50YWtlKDE1KSANCiAgICAgU3RyaW5nIG5ldzE1ICA9IG5ldzUudGFrZSgxNSkgDQogICAgIFN0cmluZyBuZXcxNiAgPSBuZXc2LnRha2UoMTUpIA0KICAgICBTdHJpbmcgbmV3MTcgID0gbmV3Ny50YWtlKDE1KSAgDQogICAgIFN0cmluZyBuZXcxOCAgPSBuZXc4LnRha2UoMTUpICANCiAgICAgU3RyaW5nIG5ldzE5ICA9IG5ldzkudGFrZSgxNSkgIA0KICAgICBTdHJpbmcgbmV3MjAgID0gbmV3MTAudGFrZSgxNSkgIA0KICAgICANCiANCiAgICAgcmV0dXJuIG5ldzExICsgbmV3MTIgKyBuZXcxMyArIG5ldzE0ICsgbmV3MTUgKyBuZXcxNiArIG5ldzE3ICsgbmV3MTggKyBuZXcxOSArIG5ldzIwICAgICAgICAgLy8gQ29uY2F0aW5hdGUgdG90YWwgYXR0cmlidXRlIHZhbHVlcyANCiAgfQ0KICANCiAgLyoNCiAgICBHZXQgdmFsdWUgZnJvbSBNSUFUVFINCiAgKi8NCiAgcHVibGljIHZvaWQgZ2V0TUlBVFRSKFN0cmluZyBpbkFUSUQsIGludCBpbkNvdW50ZXIsIGxvbmcgaW5BVE5SLCBTdHJpbmcgaW5BVE1PKSB7IA0KICAgICBjb3VudGVyID0gaW5Db3VudGVyDQogICAgIA0KICAgICBFeHByZXNzaW9uRmFjdG9yeSBleHBNSUFUVFIgPSBkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiTUlBVFRSIikgDQogICAgIGV4cE1JQVRUUiA9IGV4cE1JQVRUUi5lcSgiQUdBVE1PIiwgaW5BVE1PKSAgICAgDQogICAgIGV4cE1JQVRUUiA9IGV4cE1JQVRUUi5hbmQoZXhwTUlBVFRSLmVxKCJBR0FUSUQiLCBpbkFUSUQpKSAgICAgDQogICAgIA0KICAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJNSUFUVFIiKS5zZWxlY3Rpb24oIkFHQVRWQSIpLm1hdGNoaW5nKGV4cE1JQVRUUikuaW5kZXgoIjAwIikuYnVpbGQoKQ0KICAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQ0KICAgICBjb250YWluZXIuc2V0KCJBR0NPTk8iLCBjb21wYW55KQ0KICAgICBjb250YWluZXIuc2V0KCJBR0FUTlIiLCBpbkFUTlIpIA0KICAgICBjb250YWluZXIuc2V0KCJBR0FUSUQiLCBpbkFUSUQpICANCiAgICAgcXVlcnkucmVhZEFsbChjb250YWluZXIsIDMsIDEsIHJlbGVhc2VkSXRlbVByb2Nlc3Nvck1JQVRUUikgICAgDQogIH0NCiAgDQogIENsb3N1cmU8Pz4gcmVsZWFzZWRJdGVtUHJvY2Vzc29yTUlBVFRSID0geyBEQkNvbnRhaW5lciBjb250YWluZXIgIC0+ICAgDQogICAgICANCiAgICAgaWYoY291bnRlciA9PSAwKXsgDQogICAgICAgYXR0cmlidXRlVmFsdWUxID0gY29udGFpbmVyLmdldFN0cmluZygiQUdBVFZBIikgDQogICAgIH1lbHNlIGlmKGNvdW50ZXIgPT0gMSl7IA0KICAgICAgIGF0dHJpYnV0ZVZhbHVlMiA9IGNvbnRhaW5lci5nZXRTdHJpbmcoIkFHQVRWQSIpICAgDQogICAgIH1lbHNlIGlmKGNvdW50ZXIgPT0gMil7IA0KICAgICAgIGF0dHJpYnV0ZVZhbHVlMyA9IGNvbnRhaW5lci5nZXRTdHJpbmcoIkFHQVRWQSIpICAgDQogICAgIH1lbHNlIGlmKGNvdW50ZXIgPT0gMyl7IA0KICAgICAgIGF0dHJpYnV0ZVZhbHVlNCA9IGNvbnRhaW5lci5nZXRTdHJpbmcoIkFHQVRWQSIpIA0KICAgICB9ZWxzZSBpZihjb3VudGVyID09IDQpeyANCiAgICAgICBhdHRyaWJ1dGVWYWx1ZTUgPSBjb250YWluZXIuZ2V0U3RyaW5nKCJBR0FUVkEiKSANCiAgICAgfWVsc2UgaWYoY291bnRlciA9PSA1KXsgDQogICAgICAgYXR0cmlidXRlVmFsdWU2ID0gY29udGFpbmVyLmdldFN0cmluZygiQUdBVFZBIikgDQogICAgIH1lbHNlIGlmKGNvdW50ZXIgPT0gNil7IA0KICAgICAgIGF0dHJpYnV0ZVZhbHVlNyA9IGNvbnRhaW5lci5nZXRTdHJpbmcoIkFHQVRWQSIpIA0KICAgICB9ZWxzZSBpZihjb3VudGVyID09IDcpeyANCiAgICAgICBhdHRyaWJ1dGVWYWx1ZTggPSBjb250YWluZXIuZ2V0U3RyaW5nKCJBR0FUVkEiKSANCiAgICAgfWVsc2UgaWYoY291bnRlciA9PSA4KXsgDQogICAgICAgYXR0cmlidXRlVmFsdWU5ID0gY29udGFpbmVyLmdldFN0cmluZygiQUdBVFZBIikgDQogICAgIH1lbHNlIGlmKGNvdW50ZXIgPT0gOSl7IA0KICAgICAgIGF0dHJpYnV0ZVZhbHVlMTAgPSBjb250YWluZXIuZ2V0U3RyaW5nKCJBR0FUVkEiKSANCiAgICAgfSAgICANCiAgfQ0KICANCiAgDQogIC8qDQogICAgY2xlYXJWYWx1ZSAtIGNsZWFyIHZhbHVlIGZvciBhdHRyaWJ1dGUgaGFuZGxlIA0KICAqLw0KICANCiAgU3RyaW5nIGNsZWFyVmFsdWUoKSB7DQogICAgDQogICAgIGF0dHJpYnV0ZVZhbHVlMSA9ICIiDQogICAgIGF0dHJpYnV0ZVZhbHVlMiA9ICIiDQogICAgIGF0dHJpYnV0ZVZhbHVlMyA9ICIiDQogICAgIGF0dHJpYnV0ZVZhbHVlNCA9ICIiDQogICAgIGF0dHJpYnV0ZVZhbHVlNSA9ICIiDQogICAgIGF0dHJpYnV0ZVZhbHVlNiA9ICIiDQogICAgIGF0dHJpYnV0ZVZhbHVlNyA9ICIiDQogICAgIGF0dHJpYnV0ZVZhbHVlOCA9ICIiDQogICAgIGF0dHJpYnV0ZVZhbHVlOSA9ICIiDQogICAgIGF0dHJpYnV0ZVZhbHVlMTAgPSAiIiANCiAgICAgDQogIH0NCiAgDQogDQogIC8qDQogICAgZ2V0TUlUTUFTIC0gZ2V0IGRlc2NyaXB0aW9uIGZvciBpdGVtIA0KICAqLw0KICBTdHJpbmcgZ2V0TUlUTUFTKFN0cmluZyBpbklUTk8pIHsNCiAgICAgDQogICAgU3RyaW5nIGtleSA9IGluSVROTw0KDQogICAgREJDb250YWluZXIgY29udGFpbmVyDQogICAgYm9vbGVhbiBmb3VuZA0KICAgIGlmIChjYWNoZWRJdGVtcy5jb250YWluc0tleShrZXkpKSB7DQogICAgICAgY29udGFpbmVyID0gY2FjaGVkSXRlbXMuZ2V0KGtleSkNCiAgICAgICBmb3VuZCA9IHRydWUNCiAgICB9IGVsc2Ugew0KICAgICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk1JVE1BUyIpLnNlbGVjdGlvbigiTU1JVERTIikuaW5kZXgoIjAwIikuYnVpbGQoKQ0KICAgICAgIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpDQogICAgICAgY29udGFpbmVyLnNldCgiTU1DT05PIiwgY29tcGFueSkNCiAgICAgICBjb250YWluZXIuc2V0KCJNTUlUTk8iLCBpbklUTk8pIA0KICAgICAgIGZvdW5kID0gcXVlcnkucmVhZChjb250YWluZXIpDQogICAgICAgaWYgKGZvdW5kKXsNCiAgICAgICAgIGNhY2hlZEl0ZW1zLnB1dChrZXksIGNvbnRhaW5lcikNCiAgICAgICB9DQogICAgfQ0KDQogICAgaWYgKCFmb3VuZCkgIHsNCiAgICAgICByZXR1cm4gIiIgIA0KICAgIH0NCiAgICANCiAgICByZXR1cm4gY29udGFpbmVyLmdldFN0cmluZygiTU1JVERTIikNCiAgfQ0KIA0KICAvKg0KICAgIGFkZFRvQXJyYXlGb3JCUkFUVFIgLSBwdXQgdmFsdWUgaW4gYXJyYXkgDQogICovDQogIHB1YmxpYyB2b2lkIGFkZFRvQXJyYXlGb3JCUkFUVFIoU3RyaW5nIGluQVRJRCkgew0KICAgICAgDQogICAgIGNvdW50MSA9PSAwDQogICAgIGZyb21BdHRyaWJ1dCA9IGluQVRJRC5jb25jYXQoIjAwIikNCiAgICAgdG9BdHRyaWJ1dCA9IGluQVRJRC5jb25jYXQoIjk5IikNCiAgICAgRXhwcmVzc2lvbkZhY3RvcnkgZXhwTUFUUk1BID0gZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIk1BVFJNQSIpIA0KICAgICBleHBNQVRSTUEgPSBleHBNQVRSTUEuZ2UoIkFBQVRJRCIsIGZyb21BdHRyaWJ1dCkgICAgIA0KICAgICBleHBNQVRSTUEgPSBleHBNQVRSTUEuYW5kKGV4cE1BVFJNQSA9IGV4cE1BVFJNQS5sZSgiQUFBVElEIiwgdG9BdHRyaWJ1dCkpICAgICANCiAgICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiTUFUUk1BIikubWF0Y2hpbmcoZXhwTUFUUk1BKS5zZWxlY3Rpb24oIkFBQVRJRCIpLmluZGV4KCIwMCIpLmJ1aWxkKCkgDQogICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpDQogICAgIGNvbnRhaW5lci5zZXQoIkFBQ09OTyIsIGNvbXBhbnkpIA0KICAgICBxdWVyeS5yZWFkQWxsKGNvbnRhaW5lciwgMSwgMTAsIHJlbGVhc2VkSXRlbVByb2Nlc3Nvck1BVFJNQTEpICAgIA0KICB9DQogIA0KICBDbG9zdXJlPD8+IHJlbGVhc2VkSXRlbVByb2Nlc3Nvck1BVFJNQTEgPSB7IERCQ29udGFpbmVyIGNvbnRhaW5lciAgLT4gICANCiAgICAgYXJyYXlBdHRyaWJ1dGUxW2NvdW50MV0gPSBjb250YWluZXIuZ2V0U3RyaW5nKCJBQUFUSUQiKQ0KICAgICBjb3VudDErKw0KICB9ICANCiAgDQogIC8qDQogICAgZ2V0TUlMT01BIC0gZ2V0IGF0dHJpYnV0ZW51bWJlcg0KICAqLw0KICBwdWJsaWMgdm9pZCBnZXRNSUxPTUEoU3RyaW5nIGluSVROTywgU3RyaW5nIGluQkFOTykgew0KICAgICBmb2xsb3dVcERhdGUgPSAwIA0KICAgICBhdHRyaWJ1dGVOdW1iZXIgPSAwDQogICAgICAgDQogICAgIFN0cmluZyBrZXkgPSBpbklUTk8gKyBpbkJBTk8NCg0KICAgICBEQkNvbnRhaW5lciBjb250YWluZXINCiAgICAgYm9vbGVhbiBmb3VuZA0KICAgICBpZiAoY2FjaGVkSXRlbXNMb3QuY29udGFpbnNLZXkoa2V5KSkgew0KICAgICAgIGNvbnRhaW5lciA9IGNhY2hlZEl0ZW1zTG90LmdldChrZXkpDQogICAgICAgZm91bmQgPSB0cnVlDQogICAgIH0gZWxzZSB7DQogICAgICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiTUlMT01BIikuc2VsZWN0aW9uKCJMTUFUTlIiLCAiTE1DTkRUIikuaW5kZXgoIjAwIikuYnVpbGQoKQ0KICAgICAgIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpDQogICAgICAgY29udGFpbmVyLnNldCgiTE1DT05PIiwgY29tcGFueSkNCiAgICAgICBjb250YWluZXIuc2V0KCJMTUlUTk8iLCBpbklUTk8pIA0KICAgICAgIGNvbnRhaW5lci5zZXQoIkxNQkFOTyIsIGluQkFOTykgDQogICAgDQogICAgICAgZm91bmQgPSBxdWVyeS5yZWFkKGNvbnRhaW5lcikNCiAgICAgICBpZiAoZm91bmQpew0KICAgICAgICAgY2FjaGVkSXRlbXNMb3QucHV0KGtleSwgY29udGFpbmVyKQ0KICAgICAgIH0NCiAgICAgfQ0KDQogICAgDQogICAgIGlmICghZm91bmQpICB7DQogICAgICAgcmV0dXJuICAgDQogICAgIH0NCiAgICANCiAgICAgYXR0cmlidXRlTnVtYmVyID0gIGNvbnRhaW5lci5nZXRMb25nKCJMTUFUTlIiKQ0KICAgICBmb2xsb3dVcERhdGUgPSAgY29udGFpbmVyLmdldEludCgiTE1DTkRUIikgDQogIH0NCiAgDQogIC8qDQogICAgY2hlY2sgaWYgZmllbGQgZnJvbSBNSSBpcyBudWxsLiBSZXR1cm4gZW1wdHkgc3RyaW5nIGluIHRoYXQgY2FzZQ0KICAqLw0KICAgU3RyaW5nIHJlbW92ZU51bGxmcm9tU3RyaW5nT2JqZWN0KE9iamVjdCBmaWVsZCl7DQogICAgIGlmIChmaWVsZCA9PSBudWxsKSB7ICANCiAgICAgICByZXR1cm4gIiINCiAgICAgfSBlbHNlIHsNCiAgICAgICByZXR1cm4gZmllbGQNCiAgICAgfQ0KICAgfQ0KfSANCiA="}}}